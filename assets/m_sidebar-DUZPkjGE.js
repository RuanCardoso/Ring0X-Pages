import{u as e,j as t,P as s,a,b as r,d as n,e as l,f as o,g as i}from"./radix-BA-RjeQv.js";import{a as c,L as d,B as u,C as m,b as h,d as x,e as p,P as g,f,U as b,F as v,H as j,X as w,I as N,h as y,i as C,S,j as E,T as k,k as T,l as P,G as D,m as O,n as R,A as L,o as I,p as A,q as _,s as z,u as M,v as F,w as U,x as q}from"./utils-ABJpZGjj.js";import{c as $,a as B,B as H,S as W,b as V,u as J}from"./index-BTU8rSem.js";import{u as G,D as X,a as Y,b as K,c as Q,d as Z,e as ee,A as te,f as se,g as ae,s as re,C as ne,h as le,i as oe,j as ie,k as ce,l as de,m as ue,n as me,o as he,p as xe,q as pe,r as ge}from"./logo-BJAc_RRH.js";var fe="ScrollArea",[be]=r(fe),[ve,je]=be(fe),we=c.forwardRef((a,r)=>{const{__scopeScrollArea:n,type:l="hover",dir:o,scrollHideDelay:i=600,...d}=a,[u,m]=c.useState(null),[h,x]=c.useState(null),[p,g]=c.useState(null),[f,b]=c.useState(null),[v,j]=c.useState(null),[w,N]=c.useState(0),[y,C]=c.useState(0),[S,E]=c.useState(!1),[k,T]=c.useState(!1),P=e(r,e=>m(e)),D=G(o);return t.jsx(ve,{scope:n,type:l,dir:D,scrollHideDelay:i,scrollArea:u,viewport:h,onViewportChange:x,content:p,onContentChange:g,scrollbarX:f,onScrollbarXChange:b,scrollbarXEnabled:S,onScrollbarXEnabledChange:E,scrollbarY:v,onScrollbarYChange:j,scrollbarYEnabled:k,onScrollbarYEnabledChange:T,onCornerWidthChange:N,onCornerHeightChange:C,children:t.jsx(s.div,{dir:D,...d,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":y+"px",...a.style}})})});we.displayName=fe;var Ne="ScrollAreaViewport",ye=c.forwardRef((a,r)=>{const{__scopeScrollArea:n,children:l,nonce:o,...i}=a,d=je(Ne,n),u=c.useRef(null),m=e(r,u,d.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),t.jsx(s.div,{"data-radix-scroll-area-viewport":"",...i,ref:m,style:{overflowX:d.scrollbarXEnabled?"scroll":"hidden",overflowY:d.scrollbarYEnabled?"scroll":"hidden",...a.style},children:t.jsx("div",{ref:d.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});ye.displayName=Ne;var Ce="ScrollAreaScrollbar",Se=c.forwardRef((e,s)=>{const{forceMount:a,...r}=e,n=je(Ce,e.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:o}=n,i="horizontal"===e.orientation;return c.useEffect(()=>(i?l(!0):o(!0),()=>{i?l(!1):o(!1)}),[i,l,o]),"hover"===n.type?t.jsx(Ee,{...r,ref:s,forceMount:a}):"scroll"===n.type?t.jsx(ke,{...r,ref:s,forceMount:a}):"auto"===n.type?t.jsx(Te,{...r,ref:s,forceMount:a}):"always"===n.type?t.jsx(Pe,{...r,ref:s}):null});Se.displayName=Ce;var Ee=c.forwardRef((e,s)=>{const{forceMount:r,...n}=e,l=je(Ce,e.__scopeScrollArea),[o,i]=c.useState(!1);return c.useEffect(()=>{const e=l.scrollArea;let t=0;if(e){const s=()=>{window.clearTimeout(t),i(!0)},a=()=>{t=window.setTimeout(()=>i(!1),l.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",a),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",a)}}},[l.scrollArea,l.scrollHideDelay]),t.jsx(a,{present:r||o,children:t.jsx(Te,{"data-state":o?"visible":"hidden",...n,ref:s})})}),ke=c.forwardRef((e,s)=>{const{forceMount:r,...l}=e,o=je(Ce,e.__scopeScrollArea),i="horizontal"===e.orientation,d=Ge(()=>m("SCROLL_END"),100),[u,m]=(h="hidden",x={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},c.useReducer((e,t)=>x[e][t]??e,h));var h,x;return c.useEffect(()=>{if("idle"===u){const e=window.setTimeout(()=>m("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(e)}},[u,o.scrollHideDelay,m]),c.useEffect(()=>{const e=o.viewport,t=i?"scrollLeft":"scrollTop";if(e){let s=e[t];const a=()=>{const a=e[t];s!==a&&(m("SCROLL"),d()),s=a};return e.addEventListener("scroll",a),()=>e.removeEventListener("scroll",a)}},[o.viewport,i,m,d]),t.jsx(a,{present:r||"hidden"!==u,children:t.jsx(Pe,{"data-state":"hidden"===u?"hidden":"visible",...l,ref:s,onPointerEnter:n(e.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:n(e.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),Te=c.forwardRef((e,s)=>{const r=je(Ce,e.__scopeScrollArea),{forceMount:n,...l}=e,[o,i]=c.useState(!1),d="horizontal"===e.orientation,u=Ge(()=>{if(r.viewport){const e=r.viewport.offsetWidth<r.viewport.scrollWidth,t=r.viewport.offsetHeight<r.viewport.scrollHeight;i(d?e:t)}},10);return Xe(r.viewport,u),Xe(r.content,u),t.jsx(a,{present:n||o,children:t.jsx(Pe,{"data-state":o?"visible":"hidden",...l,ref:s})})}),Pe=c.forwardRef((e,s)=>{const{orientation:a="vertical",...r}=e,n=je(Ce,e.__scopeScrollArea),l=c.useRef(null),o=c.useRef(0),[i,d]=c.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=$e(i.viewport,i.content),m={...r,sizes:i,onSizesChange:d,hasThumb:Boolean(u>0&&u<1),onThumbChange:e=>l.current=e,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:e=>o.current=e};function h(e,t){return function(e,t,s,a="ltr"){const r=Be(s),n=r/2,l=t||n,o=r-l,i=s.scrollbar.paddingStart+l,c=s.scrollbar.size-s.scrollbar.paddingEnd-o,d=s.content-s.viewport,u="ltr"===a?[0,d]:[-1*d,0];return We([i,c],u)(e)}(e,o.current,i,t)}return"horizontal"===a?t.jsx(De,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&l.current){const e=He(n.viewport.scrollLeft,i,n.dir);l.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollLeft=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollLeft=h(e,n.dir))}}):"vertical"===a?t.jsx(Oe,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&l.current){const e=He(n.viewport.scrollTop,i);l.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{n.viewport&&(n.viewport.scrollTop=e)},onDragScroll:e=>{n.viewport&&(n.viewport.scrollTop=h(e))}}):null}),De=c.forwardRef((s,a)=>{const{sizes:r,onSizesChange:n,...l}=s,o=je(Ce,s.__scopeScrollArea),[i,d]=c.useState(),u=c.useRef(null),m=e(a,u,o.onScrollbarXChange);return c.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),t.jsx(Ie,{"data-orientation":"horizontal",...l,ref:m,sizes:r,style:{bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Be(r)+"px",...s.style},onThumbPointerDown:e=>s.onThumbPointerDown(e.x),onDragScroll:e=>s.onDragScroll(e.x),onWheelScroll:(e,t)=>{if(o.viewport){const a=o.viewport.scrollLeft+e.deltaX;s.onWheelScroll(a),Ve(a,t)&&e.preventDefault()}},onResize:()=>{u.current&&o.viewport&&i&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:qe(i.paddingLeft),paddingEnd:qe(i.paddingRight)}})}})}),Oe=c.forwardRef((s,a)=>{const{sizes:r,onSizesChange:n,...l}=s,o=je(Ce,s.__scopeScrollArea),[i,d]=c.useState(),u=c.useRef(null),m=e(a,u,o.onScrollbarYChange);return c.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),t.jsx(Ie,{"data-orientation":"vertical",...l,ref:m,sizes:r,style:{top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Be(r)+"px",...s.style},onThumbPointerDown:e=>s.onThumbPointerDown(e.y),onDragScroll:e=>s.onDragScroll(e.y),onWheelScroll:(e,t)=>{if(o.viewport){const a=o.viewport.scrollTop+e.deltaY;s.onWheelScroll(a),Ve(a,t)&&e.preventDefault()}},onResize:()=>{u.current&&o.viewport&&i&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:qe(i.paddingTop),paddingEnd:qe(i.paddingBottom)}})}})}),[Re,Le]=be(Ce),Ie=c.forwardRef((a,r)=>{const{__scopeScrollArea:o,sizes:i,hasThumb:d,onThumbChange:u,onThumbPointerUp:m,onThumbPointerDown:h,onThumbPositionChange:x,onDragScroll:p,onWheelScroll:g,onResize:f,...b}=a,v=je(Ce,o),[j,w]=c.useState(null),N=e(r,e=>w(e)),y=c.useRef(null),C=c.useRef(""),S=v.viewport,E=i.content-i.viewport,k=l(g),T=l(x),P=Ge(f,10);function D(e){if(y.current){const t=e.clientX-y.current.left,s=e.clientY-y.current.top;p({x:t,y:s})}}return c.useEffect(()=>{const e=e=>{const t=e.target,s=j?.contains(t);s&&k(e,E)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[S,j,E,k]),c.useEffect(T,[i,T]),Xe(j,P),Xe(v.content,P),t.jsx(Re,{scope:o,scrollbar:j,hasThumb:d,onThumbChange:l(u),onThumbPointerUp:l(m),onThumbPositionChange:T,onThumbPointerDown:l(h),children:t.jsx(s.div,{...b,ref:N,style:{position:"absolute",...b.style},onPointerDown:n(a.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),y.current=j.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),D(e)}}),onPointerMove:n(a.onPointerMove,D),onPointerUp:n(a.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=C.current,v.viewport&&(v.viewport.style.scrollBehavior=""),y.current=null})})})}),Ae="ScrollAreaThumb",_e=c.forwardRef((e,s)=>{const{forceMount:r,...n}=e,l=Le(Ae,e.__scopeScrollArea);return t.jsx(a,{present:r||l.hasThumb,children:t.jsx(ze,{ref:s,...n})})}),ze=c.forwardRef((a,r)=>{const{__scopeScrollArea:l,style:o,...i}=a,d=je(Ae,l),u=Le(Ae,l),{onThumbPositionChange:m}=u,h=e(r,e=>u.onThumbChange(e)),x=c.useRef(void 0),p=Ge(()=>{x.current&&(x.current(),x.current=void 0)},100);return c.useEffect(()=>{const e=d.viewport;if(e){const t=()=>{if(p(),!x.current){const t=Je(e,m);x.current=t,m()}};return m(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[d.viewport,p,m]),t.jsx(s.div,{"data-state":u.hasThumb?"visible":"hidden",...i,ref:h,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:n(a.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),s=e.clientX-t.left,a=e.clientY-t.top;u.onThumbPointerDown({x:s,y:a})}),onPointerUp:n(a.onPointerUp,u.onThumbPointerUp)})});_e.displayName=Ae;var Me="ScrollAreaCorner",Fe=c.forwardRef((e,s)=>{const a=je(Me,e.__scopeScrollArea),r=Boolean(a.scrollbarX&&a.scrollbarY);return"scroll"!==a.type&&r?t.jsx(Ue,{...e,ref:s}):null});Fe.displayName=Me;var Ue=c.forwardRef((e,a)=>{const{__scopeScrollArea:r,...n}=e,l=je(Me,r),[o,i]=c.useState(0),[d,u]=c.useState(0),m=Boolean(o&&d);return Xe(l.scrollbarX,()=>{const e=l.scrollbarX?.offsetHeight||0;l.onCornerHeightChange(e),u(e)}),Xe(l.scrollbarY,()=>{const e=l.scrollbarY?.offsetWidth||0;l.onCornerWidthChange(e),i(e)}),m?t.jsx(s.div,{...n,ref:a,style:{width:o,height:d,position:"absolute",right:"ltr"===l.dir?0:void 0,left:"rtl"===l.dir?0:void 0,bottom:0,...e.style}}):null});function qe(e){return e?parseInt(e,10):0}function $e(e,t){const s=e/t;return isNaN(s)?0:s}function Be(e){const t=$e(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=(e.scrollbar.size-s)*t;return Math.max(a,18)}function He(e,t,s="ltr"){const a=Be(t),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=t.scrollbar.size-r,l=t.content-t.viewport,o=n-a,i=function(e,[t,s]){return Math.min(s,Math.max(t,e))}(e,"ltr"===s?[0,l]:[-1*l,0]);return We([0,l],[0,o])(i)}function We(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const a=(t[1]-t[0])/(e[1]-e[0]);return t[0]+a*(s-e[0])}}function Ve(e,t){return e>0&&e<t}var Je=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},a=0;return function r(){const n={left:e.scrollLeft,top:e.scrollTop},l=s.left!==n.left,o=s.top!==n.top;(l||o)&&t(),s=n,a=window.requestAnimationFrame(r)}(),()=>window.cancelAnimationFrame(a)};function Ge(e,t){const s=l(e),a=c.useRef(0);return c.useEffect(()=>()=>window.clearTimeout(a.current),[]),c.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(s,t)},[s,t])}function Xe(e,t){const s=l(t);o(()=>{let t=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return a.observe(e),()=>{window.cancelAnimationFrame(t),a.unobserve(e)}}},[e,s])}var Ye=we,Ke=ye,Qe=Fe;function Ze({className:e,children:s,...a}){return t.jsxs(Ye,{"data-slot":"scroll-area",className:$("relative",e),...a,children:[t.jsx(Ke,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),t.jsx(et,{}),t.jsx(Qe,{})]})}function et({className:e,orientation:s="vertical",...a}){return t.jsx(Se,{"data-slot":"scroll-area-scrollbar",orientation:s,className:$("flex touch-none p-px transition-colors select-none","vertical"===s&&"h-full w-2.5 border-l border-l-transparent","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent",e),...a,children:t.jsx(_e,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var tt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{const a=B(`Primitive.${s}`),r=c.forwardRef((e,r)=>{const{asChild:n,...l}=e,o=n?a:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),t.jsx(o,{...l,ref:r})});return r.displayName=`Primitive.${s}`,{...e,[s]:r}},{}),st="horizontal",at=["horizontal","vertical"],rt=c.forwardRef((e,s)=>{const{decorative:a,orientation:r=st,...n}=e,l=function(e){return at.includes(e)}(r)?r:st,o=a?{role:"none"}:{"aria-orientation":"vertical"===l?l:void 0,role:"separator"};return t.jsx(tt.div,{"data-orientation":l,...o,...n,ref:s})});rt.displayName="Separator";var nt=rt;function lt({className:e,orientation:s="horizontal",decorative:a=!0,...r}){return t.jsx(nt,{"data-slot":"separator",decorative:a,orientation:s,className:$("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}function ot({className:e,type:s,...a}){return t.jsx("input",{type:s,"data-slot":"input",className:$("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}const it=(e,t=!1)=>{if(t){if(!e.email.trim()||!e.password.trim())return{valid:!1,message:"E-mail e senha são obrigatórios"}}else{if(!e.name.trim())return{valid:!1,message:"Nome é obrigatório"};if(e.password.length<6)return{valid:!1,message:"A senha deve ter pelo menos 6 caracteres"};if(e.password!==e.confirmPassword)return{valid:!1,message:"As senhas não coincidem"}}if(!e.email.trim())return{valid:!1,message:"E-mail é obrigatório"};return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)?{valid:!0}:{valid:!1,message:"E-mail inválido"}};function ct(){const[e,s]=c.useState(!1),[a,r]=c.useState(!0),[n,l]=c.useState(!1);c.useEffect(()=>{e||(r(!0),m({email:"",password:"",name:"",confirmPassword:""}))},[e]);const[o,i]=c.useState({show:!1,message:"",variant:"default"}),[u,m]=c.useState({email:"",password:"",name:"",confirmPassword:""}),h=e=>{m({...u,[e.target.name]:e.target.value})},x=(e,t="default")=>{i({show:!0,message:e,variant:t}),setTimeout(()=>i({show:!1,message:"",variant:"default"}),5e3)};return t.jsxs(X,{open:e,onOpenChange:s,children:[t.jsx(Y,{asChild:!0,children:t.jsx(H,{"data-testid":"login-trigger",variant:"ghost",className:"w-full text-white hover:bg-neutral-800 border border-neutral-700",children:"Login"})}),t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white",children:[t.jsxs(Q,{children:[t.jsx(Z,{className:"text-xl font-bold",children:a?"Entrar na sua conta":"Criar nova conta"}),t.jsx(ee,{className:"text-neutral-400",children:a?"Digite suas credenciais para acessar a plataforma":"Preencha os dados abaixo para criar sua conta"})]}),o.show&&t.jsx(te,{variant:o.variant,className:"mt-4",children:t.jsx(se,{children:o.message})}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e=it(u,a);return!!e.valid||(x(e.message,"destructive"),!1)})()){if(l(!0),a)try{const e=await fetch(ae.LOGIN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.email,password:u.password})}),t=await e.json();200===t.StatusCode&&t.Result?(re(t.Result.token,t.Result),x("Login realizado com sucesso!","default"),window.dispatchEvent(new CustomEvent("login-success")),s(!1),m({email:"",password:"",name:"",confirmPassword:""})):x(t.StatusMessage||"Erro ao fazer login. Tente novamente.","destructive")}catch(t){x("Erro ao conectar com o servidor. Tente novamente.","destructive")}finally{l(!1)}else try{const e=await fetch(ae.REGISTER,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.email,password:u.password,fullname:u.name})}),t=await e.json();200===t.StatusCode?(x(t.StatusMessage,"default"),r(!0)):x(t.StatusMessage||"Erro ao criar conta. Tente novamente.","destructive")}catch(t){x("Erro ao conectar com o servidor. Tente novamente.","destructive")}finally{l(!1)}a||(s(!1),m({email:"",password:"",name:"",confirmPassword:""}))}},className:"space-y-4",children:[!a&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"name",className:"text-sm font-medium text-neutral-300",children:"Nome completo"}),t.jsx(ot,{id:"name",name:"name",type:"text",value:u.name,onChange:h,required:!0,className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"Seu nome completo"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-neutral-300",children:"E-mail"}),t.jsx(ot,{id:"email",name:"email",type:"email",value:u.email,onChange:h,required:!0,className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"seu@email.com"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-neutral-300",children:"Senha"}),t.jsx(ot,{id:"password",name:"password",type:"password",value:u.password,onChange:h,required:!0,className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"••••••••"})]}),!a&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-neutral-300",children:"Confirmar senha"}),t.jsx(ot,{id:"confirmPassword",name:"confirmPassword",type:"password",value:u.confirmPassword,onChange:h,required:!0,className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"••••••••"})]}),t.jsx(H,{type:"submit",className:"w-full bg-green-600 text-white hover:bg-green-700",disabled:n,children:n?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),a?"Entrando...":"Criando conta..."]}):t.jsx(t.Fragment,{children:a?"Entrar":"Criar conta"})})]}),t.jsxs("div",{className:"mt-4 text-center space-y-2",children:[t.jsx("button",{type:"button",onClick:()=>{r(!a),m({email:"",password:"",name:"",confirmPassword:""})},className:"text-sm text-green-400 hover:text-green-300 transition-colors",children:a?"Não tem uma conta? Criar conta":"Já tem uma conta? Fazer login"}),a&&t.jsx("button",{type:"button",onClick:()=>{s(!1),setTimeout(()=>{const e=document.querySelector('[data-testid="recover-trigger"]');e&&e.click()},100)},className:"block w-full text-sm text-neutral-400 hover:text-neutral-300 transition-colors",children:"Esqueceu sua senha?"})]})]})]})}function dt(){const[e,s]=c.useState(!1),[a,r]=c.useState(!1),[n,l]=c.useState({show:!1,message:"",variant:"default"}),[o,i]=c.useState({name:"",email:"",password:"",confirmPassword:""}),u=e=>{i({...o,[e.target.name]:e.target.value})},m=(e,t="default")=>{l({show:!0,message:e,variant:t}),setTimeout(()=>l({show:!1,message:"",variant:"default"}),5e3)};return t.jsxs(X,{open:e,onOpenChange:s,children:[t.jsx(Y,{asChild:!0,children:t.jsx(H,{className:"w-full bg-green-600 text-white hover:bg-green-700",children:"Criar conta"})}),t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white",children:[t.jsxs(Q,{children:[t.jsx(Z,{className:"text-xl font-bold",children:"Criar nova conta"}),t.jsx(ee,{className:"text-neutral-400",children:"Preencha os dados abaixo para criar sua conta"})]}),n.show&&t.jsx(te,{variant:n.variant,className:"mt-4",children:t.jsx(se,{children:n.message})}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e=it(o,!1);return!!e.valid||(m(e.message,"destructive"),!1)})()){r(!0);try{const e=await fetch(ae.REGISTER,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o.email,password:o.password,fullname:o.name})}),t=await e.json();200===t.StatusCode?(m(t.StatusMessage,"default"),s(!1),setTimeout(()=>{const e=document.querySelector('[data-testid="login-trigger"]');e&&e.click()},100)):m(t.StatusMessage||"Erro ao criar conta. Tente novamente.","destructive")}catch(t){m("Erro ao conectar com o servidor. Tente novamente.","destructive")}finally{r(!1)}i({name:"",email:"",password:"",confirmPassword:""})}},className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"name",className:"text-sm font-medium text-neutral-300",children:"Nome completo"}),t.jsx(ot,{id:"name",name:"name",type:"text",value:o.name,onChange:u,required:!0,className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"Seu nome completo"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-neutral-300",children:"E-mail"}),t.jsx(ot,{id:"email",name:"email",type:"email",value:o.email,onChange:u,required:!0,className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"seu@email.com"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-neutral-300",children:"Senha"}),t.jsx(ot,{id:"password",name:"password",type:"password",value:o.password,onChange:u,required:!0,className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"••••••••"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-neutral-300",children:"Confirmar senha"}),t.jsx(ot,{id:"confirmPassword",name:"confirmPassword",type:"password",value:o.confirmPassword,onChange:u,required:!0,className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"••••••••"})]}),t.jsx(H,{type:"submit",className:"w-full bg-green-600 text-white hover:bg-green-700",disabled:a,children:a?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando conta..."]}):"Criar conta"})]}),t.jsx("div",{className:"mt-4 text-center",children:t.jsxs("span",{className:"text-sm text-neutral-400",children:["Já tem uma conta?"," ",t.jsx("button",{type:"button",onClick:()=>{s(!1),setTimeout(()=>{const e=document.querySelector('[data-testid="login-trigger"]');e&&e.click()},100)},className:"text-green-400 hover:text-green-300 transition-colors",children:"Fazer login"})]})})]})]})}var ut=Object.defineProperty,mt=Object.defineProperties,ht=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,ft=(e,t,s)=>t in e?ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var bt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");var vt=c.createContext({}),jt=c.forwardRef((e,t)=>{var s,a,r,n,l,o=e,{value:i,onChange:d,maxLength:u,textAlign:m="left",pattern:h,placeholder:x,inputMode:p="numeric",onComplete:g,pushPasswordManagerStrategy:f="increase-width",pasteTransformer:b,containerClassName:v,noScriptCSSFallback:j=Nt,render:w,children:N}=o,y=((e,t)=>{var s={};for(var a in e)pt.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&xt)for(var a of xt(e))t.indexOf(a)<0&&gt.call(e,a)&&(s[a]=e[a]);return s})(o,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]);let[C,S]=c.useState("string"==typeof y.defaultValue?y.defaultValue:""),E=null!=i?i:C,k=function(e){let t=c.useRef();return c.useEffect(()=>{t.current=e}),t.current}(E),T=c.useCallback(e=>{null==d||d(e),S(e)},[d]),P=c.useMemo(()=>h?"string"==typeof h?new RegExp(h):h:null,[h]),D=c.useRef(null),O=c.useRef(null),R=c.useRef({value:E,onChange:T,isIOS:"undefined"!=typeof window&&(null==(a=null==(s=null==window?void 0:window.CSS)?void 0:s.supports)?void 0:a.call(s,"-webkit-touch-callout","none"))}),L=c.useRef({prev:[null==(r=D.current)?void 0:r.selectionStart,null==(n=D.current)?void 0:n.selectionEnd,null==(l=D.current)?void 0:l.selectionDirection]});c.useImperativeHandle(t,()=>D.current,[]),c.useEffect(()=>{let e=D.current,t=O.current;if(!e||!t)return;function s(){if(document.activeElement!==e)return F(null),void q(null);let t,s=e.selectionStart,a=e.selectionEnd,r=e.selectionDirection,n=e.maxLength,l=e.value,o=L.current.prev,i=-1,c=-1;if(0!==l.length&&null!==s&&null!==a){let e=s===a,r=s===l.length&&l.length<n;if(e&&!r){let e=s;if(0===e)i=0,c=1,t="forward";else if(e===n)i=e-1,c=e,t="backward";else if(n>1&&l.length>1){let s=0;if(null!==o[0]&&null!==o[1]){t=e<o[1]?"backward":"forward";let a=o[0]===o[1]&&o[0]<n;"backward"===t&&!a&&(s=-1)}i=s+e,c=s+e+1}}-1!==i&&-1!==c&&i!==c&&D.current.setSelectionRange(i,c,t)}let d=-1!==i?i:s,u=-1!==c?c:a,m=null!=t?t:r;F(d),q(u),L.current.prev=[d,u,m]}if(R.current.value!==e.value&&R.current.onChange(e.value),L.current.prev=[e.selectionStart,e.selectionEnd,e.selectionDirection],document.addEventListener("selectionchange",s,{capture:!0}),s(),document.activeElement===e&&z(!0),!document.getElementById("input-otp-style")){let e=document.createElement("style");if(e.id="input-otp-style",document.head.appendChild(e),e.sheet){let t="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";wt(e.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),wt(e.sheet,`[data-input-otp]:autofill { ${t} }`),wt(e.sheet,`[data-input-otp]:-webkit-autofill { ${t} }`),wt(e.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),wt(e.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let a=()=>{t&&t.style.setProperty("--root-height",`${e.clientHeight}px`)};a();let r=new ResizeObserver(a);return r.observe(e),()=>{document.removeEventListener("selectionchange",s,{capture:!0}),r.disconnect()}},[]);let[I,A]=c.useState(!1),[_,z]=c.useState(!1),[M,F]=c.useState(null),[U,q]=c.useState(null);c.useEffect(()=>{!function(e){setTimeout(e,0),setTimeout(e,10),setTimeout(e,50)}(()=>{var e,t,s,a;null==(e=D.current)||e.dispatchEvent(new Event("input"));let r=null==(t=D.current)?void 0:t.selectionStart,n=null==(s=D.current)?void 0:s.selectionEnd,l=null==(a=D.current)?void 0:a.selectionDirection;null!==r&&null!==n&&(F(r),q(n),L.current.prev=[r,n,l])})},[E,_]),c.useEffect(()=>{void 0!==k&&E!==k&&k.length<u&&E.length===u&&(null==g||g(E))},[u,g,k,E]);let $=function({containerRef:e,inputRef:t,pushPasswordManagerStrategy:s,isFocused:a}){let[r,n]=c.useState(!1),[l,o]=c.useState(!1),[i,d]=c.useState(!1),u=c.useMemo(()=>"none"!==s&&("increase-width"===s||"experimental-no-flickering"===s)&&r&&l,[r,l,s]),m=c.useCallback(()=>{let a=e.current,r=t.current;if(!a||!r||i||"none"===s)return;let l=a,o=l.getBoundingClientRect().left+l.offsetWidth-18,c=l.getBoundingClientRect().top+l.offsetHeight/2;0===document.querySelectorAll(bt).length&&document.elementFromPoint(o,c)===a||(n(!0),d(!0))},[e,t,i,s]);return c.useEffect(()=>{let t=e.current;if(!t||"none"===s)return;function a(){let e=window.innerWidth-t.getBoundingClientRect().right;o(e>=40)}a();let r=setInterval(a,1e3);return()=>{clearInterval(r)}},[e,s]),c.useEffect(()=>{let e=a||document.activeElement===t.current;if("none"===s||!e)return;let r=setTimeout(m,0),n=setTimeout(m,2e3),l=setTimeout(m,5e3),o=setTimeout(()=>{d(!0)},6e3);return()=>{clearTimeout(r),clearTimeout(n),clearTimeout(l),clearTimeout(o)}},[t,a,s,m]),{hasPWMBadge:r,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:"40px"}}({containerRef:O,inputRef:D,pushPasswordManagerStrategy:f,isFocused:_}),B=c.useCallback(e=>{let t=e.currentTarget.value.slice(0,u);t.length>0&&P&&!P.test(t)?e.preventDefault():("string"==typeof k&&t.length<k.length&&document.dispatchEvent(new Event("selectionchange")),T(t))},[u,T,k,P]),H=c.useCallback(()=>{var e;if(D.current){let t=Math.min(D.current.value.length,u-1),s=D.current.value.length;null==(e=D.current)||e.setSelectionRange(t,s),F(t),q(s)}z(!0)},[u]),W=c.useCallback(e=>{var t,s;let a=D.current;if(!(b||R.current.isIOS&&e.clipboardData&&a))return;let r=e.clipboardData.getData("text/plain"),n=b?b(r):r;e.preventDefault();let l=null==(t=D.current)?void 0:t.selectionStart,o=null==(s=D.current)?void 0:s.selectionEnd,i=(l!==o?E.slice(0,l)+n+E.slice(o):E.slice(0,l)+n+E.slice(l)).slice(0,u);if(i.length>0&&P&&!P.test(i))return;a.value=i,T(i);let c=Math.min(i.length,u-1),d=i.length;a.setSelectionRange(c,d),F(c),q(d)},[u,T,P,E]),V=c.useMemo(()=>({position:"relative",cursor:y.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[y.disabled]),J=c.useMemo(()=>({position:"absolute",inset:0,width:$.willPushPWMBadge?`calc(100% + ${$.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:$.willPushPWMBadge?`inset(0 ${$.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:m,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[$.PWM_BADGE_SPACE_WIDTH,$.willPushPWMBadge,m]),G=c.useMemo(()=>c.createElement("input",((e,t)=>mt(e,ht(t)))(((e,t)=>{for(var s in t||(t={}))pt.call(t,s)&&ft(e,s,t[s]);if(xt)for(var s of xt(t))gt.call(t,s)&&ft(e,s,t[s]);return e})({autoComplete:y.autoComplete||"one-time-code"},y),{"data-input-otp":!0,"data-input-otp-placeholder-shown":0===E.length||void 0,"data-input-otp-mss":M,"data-input-otp-mse":U,inputMode:p,pattern:null==P?void 0:P.source,"aria-placeholder":x,style:J,maxLength:u,value:E,ref:D,onPaste:e=>{var t;W(e),null==(t=y.onPaste)||t.call(y,e)},onChange:B,onMouseOver:e=>{var t;A(!0),null==(t=y.onMouseOver)||t.call(y,e)},onMouseLeave:e=>{var t;A(!1),null==(t=y.onMouseLeave)||t.call(y,e)},onFocus:e=>{var t;H(),null==(t=y.onFocus)||t.call(y,e)},onBlur:e=>{var t;z(!1),null==(t=y.onBlur)||t.call(y,e)}})),[B,H,W,p,J,u,U,M,y,null==P?void 0:P.source,E]),X=c.useMemo(()=>({slots:Array.from({length:u}).map((e,t)=>{var s;let a=_&&null!==M&&null!==U&&(M===U&&t===M||t>=M&&t<U),r=void 0!==E[t]?E[t]:null;return{char:r,placeholderChar:void 0!==E[0]?null:null!=(s=null==x?void 0:x[t])?s:null,isActive:a,hasFakeCaret:a&&null===r}}),isFocused:_,isHovering:!y.disabled&&I}),[_,I,u,U,M,y.disabled,E]),Y=c.useMemo(()=>w?w(X):c.createElement(vt.Provider,{value:X},N),[N,X,w]);return c.createElement(c.Fragment,null,null!==j&&c.createElement("noscript",null,c.createElement("style",null,j)),c.createElement("div",{ref:O,"data-input-otp-container":!0,style:V,className:v},Y,c.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},G)))});function wt(e,t){try{e.insertRule(t)}catch(s){}}jt.displayName="Input";var Nt="\n[data-input-otp] {\n  --nojs-bg: white !important;\n  --nojs-fg: black !important;\n\n  background-color: var(--nojs-bg) !important;\n  color: var(--nojs-fg) !important;\n  caret-color: var(--nojs-fg) !important;\n  letter-spacing: .25em !important;\n  text-align: center !important;\n  border: 1px solid var(--nojs-fg) !important;\n  border-radius: 4px !important;\n  width: 100% !important;\n}\n@media (prefers-color-scheme: dark) {\n  [data-input-otp] {\n    --nojs-bg: black !important;\n    --nojs-fg: white !important;\n  }\n}";function yt({className:e,containerClassName:s,...a}){return t.jsx(jt,{"data-slot":"input-otp",containerClassName:$("flex items-center gap-2 has-disabled:opacity-50",s),className:$("disabled:cursor-not-allowed",e),...a})}function Ct({className:e,...s}){return t.jsx("div",{"data-slot":"input-otp-group",className:$("flex items-center",e),...s})}function St({index:e,className:s,...a}){const r=c.useContext(vt),{char:n,hasFakeCaret:l,isActive:o}=r?.slots[e]??{};return t.jsxs("div",{"data-slot":"input-otp-slot","data-active":o,className:$("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",s),...a,children:[n,l&&t.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}function Et(){const[e,s]=c.useState(!1),[a,r]=c.useState(1),[n,l]=c.useState(!1),[o,i]=c.useState({show:!1,message:"",variant:"default"}),[u,m]=c.useState({email:"",code:"",newPassword:"",confirmPassword:""}),h=(e,t="default")=>{i({show:!0,message:e,variant:t}),setTimeout(()=>i({show:!1,message:"",variant:"default"}),5e3)},x=e=>{m({...u,[e.target.name]:e.target.value})};return t.jsxs(X,{open:e,onOpenChange:e=>{s(e),e||(r(1),m({email:"",code:"",newPassword:"",confirmPassword:""}))},children:[t.jsx(Y,{asChild:!0,children:t.jsx(H,{"data-testid":"recover-trigger",variant:"ghost",className:"w-full text-white hover:bg-neutral-800 border border-neutral-700",children:"Recuperar Senha"})}),t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white",children:[t.jsxs(Q,{children:[t.jsxs(Z,{className:"text-xl font-bold",children:[1===a&&"Recuperar Senha",2===a&&"Verificar Código",3===a&&"Nova Senha"]}),t.jsxs(ee,{className:"text-neutral-400",children:[1===a&&"Digite seu e-mail para receber um código de recuperação",2===a&&"Digite o código de 6 dígitos enviado para seu e-mail",3===a&&"Digite sua nova senha"]})]}),o.show&&t.jsx(te,{variant:o.variant,className:"mt-4",children:t.jsx(se,{children:o.message})}),1===a&&t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{const e=await fetch(ae.RECOVER,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.email})}),t=await e.json();200===t.StatusCode?(h(t.StatusMessage,"default"),r(2)):h(t.StatusMessage||"Erro ao enviar código. Tente novamente.","destructive")}catch(t){h("Erro ao conectar com o servidor. Tente novamente.","destructive")}finally{l(!1)}},className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-neutral-300",children:"E-mail"}),t.jsx(ot,{id:"email",name:"email",type:"email",value:u.email,onChange:x,required:!0,className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"seu@email.com"})]}),t.jsx(H,{type:"submit",className:"w-full bg-green-600 text-white hover:bg-green-700",disabled:n,children:n?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviando..."]}):"Enviar Código"})]}),2===a&&t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{const e=await fetch(ae.VERIFY_CODE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.email,code:u.code})}),t=await e.json();200===t.StatusCode?(h(t.StatusMessage,"default"),r(3)):h(t.StatusMessage||"Código inválido. Tente novamente.","destructive")}catch(t){h("Erro ao conectar com o servidor. Tente novamente.","destructive")}finally{l(!1)}},className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-medium text-neutral-300",children:"Código de Verificação"}),t.jsx("div",{className:"flex justify-center",children:t.jsx(yt,{maxLength:6,value:u.code,onChange:e=>{m({...u,code:e})},children:t.jsxs(Ct,{children:[t.jsx(St,{index:0}),t.jsx(St,{index:1}),t.jsx(St,{index:2}),t.jsx(St,{index:3}),t.jsx(St,{index:4}),t.jsx(St,{index:5})]})})})]}),t.jsx(H,{type:"submit",className:"w-full bg-green-600 text-white hover:bg-green-700",disabled:n||6!==u.code.length,children:n?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Verificando..."]}):"Verificar Código"})]}),3===a&&t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),u.newPassword===u.confirmPassword){l(!0);try{const e=await fetch(ae.RESET_PASSWORD,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.email,code:u.code,newPassword:u.newPassword})}),t=await e.json();200===t.StatusCode?(h(t.StatusMessage,"default"),setTimeout(()=>{s(!1),r(1),m({email:"",code:"",newPassword:"",confirmPassword:""});const e=document.querySelector('[data-testid="login-trigger"]');e&&e.click()},2e3)):h(t.StatusMessage||"Erro ao redefinir senha. Tente novamente.","destructive")}catch(t){h("Erro ao conectar com o servidor. Tente novamente.","destructive")}finally{l(!1)}}else h("As senhas não coincidem.","destructive")},className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"newPassword",className:"text-sm font-medium text-neutral-300",children:"Nova Senha"}),t.jsx(ot,{id:"newPassword",name:"newPassword",type:"password",value:u.newPassword,onChange:x,required:!0,className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"••••••••"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium text-neutral-300",children:"Confirmar Nova Senha"}),t.jsx(ot,{id:"confirmPassword",name:"confirmPassword",type:"password",value:u.confirmPassword,onChange:x,required:!0,className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"••••••••"})]}),t.jsx(H,{type:"submit",className:"w-full bg-green-600 text-white hover:bg-green-700",disabled:n,children:n?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvando..."]}):"Redefinir Senha"})]}),t.jsx("div",{className:"mt-4 text-center",children:t.jsx("button",{type:"button",onClick:()=>{s(!1),setTimeout(()=>{const e=document.querySelector('[data-testid="login-trigger"]');e&&e.click()},100)},className:"text-sm text-green-400 hover:text-green-300 transition-colors",children:"Voltar para o Login"})})]})]})}const kt=V("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function Tt({className:e,variant:s="default",asChild:a=!1,...r}){const n=a?W:"span";return t.jsx(n,{"data-slot":"badge","data-variant":s,className:$(kt({variant:s}),e),...r})}function Pt(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const a=s.reduce((t,{useScope:s,scopeName:a})=>({...t,...s(e)[`__scope${a}`]}),{});return c.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return s.scopeName=t.scopeName,s}var Dt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{const a=B(`Primitive.${s}`),r=c.forwardRef((e,r)=>{const{asChild:n,...l}=e,o=n?a:s;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),t.jsx(o,{...l,ref:r})});return r.displayName=`Primitive.${s}`,{...e,[s]:r}},{}),Ot="Progress",[Rt]=function(e,s=[]){let a=[];const r=()=>{const t=a.map(e=>c.createContext(e));return function(s){const a=s?.[e]||t;return c.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return r.scopeName=e,[function(s,r){const n=c.createContext(r);n.displayName=s+"Context";const l=a.length;a=[...a,r];const o=s=>{const{scope:a,children:r,...o}=s,i=a?.[e]?.[l]||n,d=c.useMemo(()=>o,Object.values(o));return t.jsx(i.Provider,{value:d,children:r})};return o.displayName=s+"Provider",[o,function(t,a){const o=a?.[e]?.[l]||n,i=c.useContext(o);if(i)return i;if(void 0!==r)return r;throw new Error(`\`${t}\` must be used within \`${s}\``)}]},Pt(r,...s)]}(Ot),[Lt,It]=Rt(Ot),At=c.forwardRef((e,s)=>{const{__scopeProgress:a,value:r=null,max:n,getValueLabel:l=Mt,...o}=e;(n||0===n)&&qt(n);const i=qt(n)?n:100;null!==r&&$t(r,i);const c=$t(r,i)?r:null,d=Ut(c)?l(c,i):void 0;return t.jsx(Lt,{scope:a,value:c,max:i,children:t.jsx(Dt.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":Ut(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":Ft(c,i),"data-value":c??void 0,"data-max":i,...o,ref:s})})});At.displayName=Ot;var _t="ProgressIndicator",zt=c.forwardRef((e,s)=>{const{__scopeProgress:a,...r}=e,n=It(_t,a);return t.jsx(Dt.div,{"data-state":Ft(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...r,ref:s})});function Mt(e,t){return`${Math.round(e/t*100)}%`}function Ft(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function Ut(e){return"number"==typeof e}function qt(e){return Ut(e)&&!isNaN(e)&&e>0}function $t(e,t){return Ut(e)&&!isNaN(e)&&e<=t&&e>=0}zt.displayName=_t;var Bt=At,Ht=zt;function Wt({className:e,value:s,...a}){return t.jsx(Bt,{"data-slot":"progress",className:$("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...a,children:t.jsx(Ht,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})})}function Vt({children:e}){const[s,a]=c.useState(!1),r=e=>{switch(e){case"completed":return t.jsx(Tt,{className:"bg-green-600 hover:bg-green-700",children:"Concluído"});case"in_progress":return t.jsx(Tt,{className:"bg-blue-600 hover:bg-blue-700",children:"Em andamento"});case"not_started":return t.jsx(Tt,{variant:"secondary",children:"Não iniciado"});default:return null}},n=e=>{switch(e){case"completed":return t.jsx(m,{className:"h-5 w-5 text-green-400"});case"in_progress":return t.jsx(h,{className:"h-5 w-5 text-blue-400"});case"not_started":return t.jsx(p,{className:"h-5 w-5 text-neutral-400"});default:return null}};return t.jsxs(X,{open:s,onOpenChange:a,children:[t.jsx(Y,{asChild:!0,children:e}),t.jsxs(K,{"data-my-courses-dialog":!0,className:"bg-neutral-950 border-neutral-800 text-white w-[calc(100vw-1.5rem)] sm:w-full max-w-6xl sm:max-w-6xl !h-[90vh] !max-h-[90vh] overflow-hidden p-0 !flex !flex-col !gap-0",children:[t.jsxs(Q,{className:"px-4 sm:px-6 py-4 border-b border-neutral-800 shrink-0",children:[t.jsx(Z,{className:"text-2xl font-bold text-white",children:"Meus Cursos"}),t.jsx(ee,{className:"text-neutral-400",children:"Acompanhe seu progresso e continue seus estudos"})]}),t.jsxs("div",{"data-my-courses-scroll":!0,className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden scrollbar-hide px-4 sm:px-6 py-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[t.jsx(ne,{className:"bg-neutral-900 border-neutral-800",children:t.jsx(le,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(u,{className:"h-8 w-8 text-green-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-white",children:"4"}),t.jsx("p",{className:"text-sm text-neutral-400",children:"Cursos"})]})]})})}),t.jsx(ne,{className:"bg-neutral-900 border-neutral-800",children:t.jsx(le,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(m,{className:"h-8 w-8 text-green-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-white",children:"1"}),t.jsx("p",{className:"text-sm text-neutral-400",children:"Concluídos"})]})]})})}),t.jsx(ne,{className:"bg-neutral-900 border-neutral-800",children:t.jsx(le,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(h,{className:"h-8 w-8 text-blue-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-white",children:"2"}),t.jsx("p",{className:"text-sm text-neutral-400",children:"Em andamento"})]})]})})}),t.jsx(ne,{className:"bg-neutral-900 border-neutral-800",children:t.jsx(le,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(x,{className:"h-8 w-8 text-yellow-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-2xl font-bold text-white",children:"42h"}),t.jsx("p",{className:"text-sm text-neutral-400",children:"Total de conteúdo"})]})]})})})]}),t.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[{id:1,title:"Desenvolvimento Web Completo",instructor:"Ruan Cardoso",progress:75,totalLessons:45,completedLessons:34,duration:"12h 30min",thumbnail:"https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=400&h=200&fit=crop",status:"in_progress",lastAccessed:"Há 2 dias"},{id:2,title:"React Avançado",instructor:"Ruan Cardoso",progress:100,totalLessons:32,completedLessons:32,duration:"8h 15min",thumbnail:"https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=400&h=200&fit=crop",status:"completed",lastAccessed:"Há 1 semana"},{id:3,title:"Cybersecurity Fundamentals",instructor:"Ruan Cardoso",progress:30,totalLessons:28,completedLessons:8,duration:"6h 45min",thumbnail:"https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=400&h=200&fit=crop",status:"in_progress",lastAccessed:"Há 5 dias"},{id:4,title:"Machine Learning Basics",instructor:"Ruan Cardoso",progress:0,totalLessons:40,completedLessons:0,duration:"15h 20min",thumbnail:"https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=400&h=200&fit=crop",status:"not_started",lastAccessed:"Nunca"}].map(e=>t.jsxs(ne,{className:"bg-neutral-900 border-neutral-800 hover:border-neutral-700 transition-colors",children:[t.jsx(oe,{className:"pb-3",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsxs("div",{className:"relative shrink-0 w-full sm:w-24 h-40 sm:h-16 rounded-lg overflow-hidden",children:[t.jsx("img",{src:e.thumbnail,alt:e.title,className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:n(e.status)})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx(ie,{className:"text-lg font-semibold text-white leading-snug wrap-break-word mb-1",children:e.title}),t.jsxs("p",{className:"text-sm text-neutral-400 mb-2",children:["por ",e.instructor]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r(e.status),t.jsx("span",{className:"text-xs text-neutral-500",children:e.lastAccessed})]})]})]})}),t.jsx(le,{className:"pt-0",children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-neutral-400",children:"Progresso"}),t.jsxs("span",{className:"text-white font-medium",children:[e.progress,"%"]})]}),t.jsx(Wt,{value:e.progress,className:"h-2 bg-neutral-700"})]}),t.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 text-sm",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-neutral-400",children:[t.jsxs("span",{children:[e.completedLessons,"/",e.totalLessons," ","aulas"]}),t.jsx("span",{children:e.duration})]})}),t.jsx(H,{className:"w-full bg-green-600 hover:bg-green-700 text-white",disabled:"not_started"===e.status,children:"completed"===e.status?"Rever Curso":"in_progress"===e.status?"Continuar":"Começar Curso"})]})})]},e.id))})]})]})]})}const Jt=async(e,t={})=>{const s=ce();if(!s)throw new Error("Token de autenticação não encontrado");const a={"Content-Type":"application/json",Authorization:`Bearer ${s}`,...t.headers},r=await fetch(e,{...t,headers:a});if(!r.ok){const e=await r.json().catch(()=>({}));throw new Error(e.message||`HTTP error! status: ${r.status}`)}return r.json()},Gt=async()=>await Jt(ae.CATEGORIES,{method:"GET"}),Xt=async(e,t)=>await Jt(ae.CATEGORIES_CREATE,{method:"POST",body:JSON.stringify({name:e,description:t})}),Yt=async(e,t,s)=>await Jt(ae.CATEGORIES_UPDATE,{method:"POST",body:JSON.stringify({id:e,name:t,description:s})}),Kt=async e=>await Jt(ae.CATEGORIES_DELETE,{method:"POST",body:JSON.stringify({id:e})}),Qt=async(e,t,s)=>await Jt(ae.COURSES_CREATE,{method:"POST",body:JSON.stringify({categoryId:e,title:t,description:s})}),Zt=async(e,t,s)=>await Jt(ae.COURSES_UPDATE,{method:"POST",body:JSON.stringify({id:e,title:t,description:s})}),es=async e=>await Jt(ae.COURSES_DELETE,{method:"POST",body:JSON.stringify({id:e})}),ts=async(e,t,s,a)=>await Jt(ae.LESSONS_CREATE,{method:"POST",body:JSON.stringify({courseId:e,title:t,duration:s,description:a})}),ss=async(e,t,s,a,r)=>await Jt(ae.LESSONS_UPDATE,{method:"POST",body:JSON.stringify({id:e,title:t,duration:s,description:a,isPaid:r})}),as=async e=>await Jt(ae.LESSONS_DELETE,{method:"POST",body:JSON.stringify({id:e})}),rs=async e=>await Jt(`${ae.COURSES_BY_CATEGORY}?categoryId=${e}`,{method:"GET"}),ns=async e=>await Jt(`${ae.LESSONS_BY_COURSE}?courseId=${e}`,{method:"GET"}),ls=async(e,t,s)=>await(async(e,t,s,a)=>{const r=ce();if(!r)throw new Error("Token de autenticação não encontrado");const n=52428800,l=Math.ceil(t.size/n),o=async(t,n,l)=>{const o=new FormData;o.append("video",t);const i={lessonId:a,chunkIndex:n,totalChunks:l},c=new Blob([JSON.stringify(i)],{type:"application/json"}),d=new File([c],"videoPath.json",{type:"application/json"});return o.append("videoPath",d),new Promise((t,a)=>{const i=new XMLHttpRequest;s&&i.upload.addEventListener("progress",e=>{if(e.lengthComputable){const t=n/l*100,a=e.loaded/e.total*(100/l),r=Math.round(t+a),o=Math.min(r,95);s(o)}}),i.addEventListener("load",()=>{if(i.status>=200&&i.status<300)try{const e=JSON.parse(i.responseText);t(e)}catch(e){a(new Error("Resposta inválida do servidor"))}else try{const e=JSON.parse(i.responseText);a(new Error(e.message||`HTTP error! status: ${i.status}`))}catch{a(new Error(`HTTP error! status: ${i.status}`))}}),i.addEventListener("error",()=>{a(new Error("Erro de conexão"))}),i.open("POST",e),i.setRequestHeader("Authorization",`Bearer ${r}`),i.send(o)})};try{let e=null;for(let a=0;a<l;a++){const r=a*n,c=Math.min(r+n,t.size),d=t.slice(r,c);try{e=await o(d,a,l),a===l-1&&s&&s(100)}catch(i){throw new Error(`Erro ao fazer upload da parte ${a+1}/${l}: ${i.message}`)}}return e||{StatusCode:200,StatusMessage:"Upload concluído com sucesso"}}catch(i){throw i}})(ae.VIDEO_UPLOAD,e,t,s),os=async()=>{try{const e=await Jt(ae.VIDEO_PROCESSING_STATUS,{method:"GET"});return"string"==typeof e?"true"===e.toLowerCase():e&&"object"==typeof e?"true"===e.status||"true"===e.result||"true"===e.data:"true"===String(e).toLowerCase()}catch(e){return!1}};function is({isOpen:e,onOpenChange:s,categoryName:a,onCategoryNameChange:r,categoryDescription:n,onCategoryDescriptionChange:l,onCreateCategory:o,isLoading:i=!1}){return t.jsxs(X,{open:e,onOpenChange:s,children:[t.jsx(Y,{asChild:!0,children:t.jsxs(H,{className:"bg-green-600 hover:bg-green-700",children:[t.jsx(g,{className:"h-4 w-4 mr-2"}),"Nova Categoria"]})}),t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white",children:[t.jsxs(Q,{children:[t.jsx(Z,{children:"Criar Nova Categoria"}),t.jsx(ee,{className:"text-neutral-400",children:"Digite o nome da nova categoria para adicionar ao dashboard."})]}),t.jsxs("div",{className:"py-4 space-y-4",children:[t.jsx(ot,{value:a,onChange:e=>r(e.target.value),className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"Nome da categoria",onKeyDown:e=>{"Enter"===e.key&&o()}}),t.jsx("textarea",{value:n,onChange:e=>l(e.target.value),className:"w-full bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500 rounded-md px-3 py-2 text-sm resize-none h-20 focus:outline-none focus:ring-2 focus:ring-green-600 focus:border-transparent",placeholder:"Descrição da categoria",rows:3,required:!0})]}),t.jsxs(de,{children:[t.jsx(H,{onClick:()=>{s(!1),r(""),l("")},className:"border border-neutral-700 text-white hover:bg-neutral-800",disabled:i,children:"Cancelar"}),t.jsx(H,{onClick:o,className:"bg-green-600 hover:bg-green-700",disabled:!a.trim()||!n.trim()||i,children:i?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"h-4 w-4 animate-spin"}),"Criando..."]}):"Criar Categoria"})]})]})]})}function cs({isOpen:e,onOpenChange:s,courseTitle:a,onCourseTitleChange:r,courseDescription:n,onCourseDescriptionChange:l,onCreateCourse:o,selectedCategoryId:i,categories:c,isLoading:u=!1}){const m=c.find(e=>e.id===i);return t.jsxs(X,{open:e,onOpenChange:s,children:[t.jsx(Y,{asChild:!0,children:t.jsxs(H,{variant:"ghost",className:"border border-neutral-700 hover:bg-neutral-900",disabled:!i,children:[t.jsx(g,{className:"h-4 w-4 mr-2"}),"Novo Curso"]})}),t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white",children:[t.jsxs(Q,{children:[t.jsx(Z,{children:"Criar Novo Curso"}),t.jsx(ee,{className:"text-neutral-400",children:i?`Adicionando um novo curso à categoria: ${m?.name}`:"Selecione uma categoria primeiro para criar um curso."})]}),t.jsxs("div",{className:"py-4 space-y-4",children:[t.jsx(ot,{value:a,onChange:e=>r(e.target.value),className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"Título do curso",onKeyDown:e=>{"Enter"===e.key&&o()}}),t.jsx("textarea",{value:n,onChange:e=>l(e.target.value),className:"w-full bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500 rounded-md px-3 py-2 text-sm resize-none h-20 focus:outline-none focus:ring-2 focus:ring-green-600 focus:border-transparent",placeholder:"Descrição do curso",rows:3,required:!0})]}),t.jsxs(de,{children:[t.jsx(H,{onClick:()=>{s(!1),r(""),l("")},className:"border border-neutral-700 text-white hover:bg-neutral-800",disabled:u,children:"Cancelar"}),t.jsx(H,{onClick:o,className:"bg-green-600 hover:bg-green-700",disabled:!a.trim()||!n.trim()||!i||u,children:u?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"h-4 w-4 animate-spin"}),"Criando..."]}):"Criar Curso"})]})]})]})}function ds({isOpen:e,onOpenChange:s,lessonTitle:a,onLessonTitleChange:r,lessonDuration:n,onLessonDurationChange:l,lessonDescription:o,onLessonDescriptionChange:i,onCreateLesson:c,selectedCategoryId:u,selectedCourseId:m,categories:h,isLoading:x=!1}){const p=h.find(e=>e.id===u),f=p?.courses.find(e=>e.id===m);return t.jsxs(X,{open:e,onOpenChange:s,children:[t.jsx(Y,{asChild:!0,children:t.jsxs(H,{variant:"ghost",className:"border border-neutral-700 hover:bg-neutral-900",disabled:!m,children:[t.jsx(g,{className:"h-4 w-4 mr-2"}),"Nova Aula"]})}),t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white",children:[t.jsxs(Q,{children:[t.jsx(Z,{children:"Criar Nova Aula"}),t.jsx(ee,{className:"text-neutral-400",children:m?`Adicionando uma nova aula ao curso: ${f?.title}`:"Selecione um curso primeiro para criar uma aula."})]}),t.jsxs("div",{className:"py-4 space-y-4",children:[t.jsx(ot,{value:a,onChange:e=>r(e.target.value),className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"Título da aula"}),t.jsx(ot,{value:n,onChange:e=>l(e.target.value),className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"Duração (ex: 15:30)"}),t.jsx("textarea",{value:o,onChange:e=>i(e.target.value),className:"w-full bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500 rounded-md px-3 py-2 text-sm resize-none h-20 focus:outline-none focus:ring-2 focus:ring-green-600 focus:border-transparent",placeholder:"Descrição da aula",rows:3,required:!0})]}),t.jsxs(de,{children:[t.jsx(H,{onClick:()=>{s(!1),r(""),l(""),i("")},className:"border border-neutral-700 text-white hover:bg-neutral-800",disabled:x,children:"Cancelar"}),t.jsx(H,{onClick:c,className:"bg-green-600 hover:bg-green-700",disabled:!a.trim()||!n.trim()||!o.trim()||!m||x,children:x?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"h-4 w-4 animate-spin"}),"Criando..."]}):"Criar Aula"})]})]})]})}var us="Checkbox",[ms]=r(us),[hs,xs]=ms(us);function ps(e){const{__scopeCheckbox:s,checked:a,children:r,defaultChecked:n,disabled:l,form:o,name:d,onCheckedChange:u,required:m,value:h="on",internal_do_not_use_render:x}=e,[p,g]=i({prop:a,defaultProp:n??!1,onChange:u,caller:us}),[f,b]=c.useState(null),[v,j]=c.useState(null),w=c.useRef(!1),N=!f||(!!o||!!f.closest("form")),y={checked:p,disabled:l,setChecked:g,control:f,setControl:b,name:d,form:o,value:h,hasConsumerStoppedPropagationRef:w,required:m,defaultChecked:!Cs(n)&&n,isFormControl:N,bubbleInput:v,setBubbleInput:j};return t.jsx(hs,{scope:s,...y,children:ys(x)?x(y):r})}var gs="CheckboxTrigger",fs=c.forwardRef(({__scopeCheckbox:a,onKeyDown:r,onClick:l,...o},i)=>{const{control:d,value:u,disabled:m,checked:h,required:x,setControl:p,setChecked:g,hasConsumerStoppedPropagationRef:f,isFormControl:b,bubbleInput:v}=xs(gs,a),j=e(i,p),w=c.useRef(h);return c.useEffect(()=>{const e=d?.form;if(e){const t=()=>g(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[d,g]),t.jsx(s.button,{type:"button",role:"checkbox","aria-checked":Cs(h)?"mixed":h,"aria-required":x,"data-state":Ss(h),"data-disabled":m?"":void 0,disabled:m,value:u,...o,ref:j,onKeyDown:n(r,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:n(l,e=>{g(e=>!!Cs(e)||!e),v&&b&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})})});fs.displayName=gs;var bs=c.forwardRef((e,s)=>{const{__scopeCheckbox:a,name:r,checked:n,defaultChecked:l,required:o,disabled:i,value:c,onCheckedChange:d,form:u,...m}=e;return t.jsx(ps,{__scopeCheckbox:a,checked:n,defaultChecked:l,disabled:i,required:o,onCheckedChange:d,name:r,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>t.jsxs(t.Fragment,{children:[t.jsx(fs,{...m,ref:s,__scopeCheckbox:a}),e&&t.jsx(Ns,{__scopeCheckbox:a})]})})});bs.displayName=us;var vs="CheckboxIndicator",js=c.forwardRef((e,r)=>{const{__scopeCheckbox:n,forceMount:l,...o}=e,i=xs(vs,n);return t.jsx(a,{present:l||Cs(i.checked)||!0===i.checked,children:t.jsx(s.span,{"data-state":Ss(i.checked),"data-disabled":i.disabled?"":void 0,...o,ref:r,style:{pointerEvents:"none",...e.style}})})});js.displayName=vs;var ws="CheckboxBubbleInput",Ns=c.forwardRef(({__scopeCheckbox:a,...r},n)=>{const{control:l,hasConsumerStoppedPropagationRef:o,checked:i,defaultChecked:d,required:u,disabled:m,name:h,value:x,form:p,bubbleInput:g,setBubbleInput:f}=xs(ws,a),b=e(n,f),v=function(e){const t=c.useRef({value:e,previous:e});return c.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(i),j=ue(l);c.useEffect(()=>{const e=g;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set,a=!o.current;if(v!==i&&s){const t=new Event("click",{bubbles:a});e.indeterminate=Cs(i),s.call(e,!Cs(i)&&i),e.dispatchEvent(t)}},[g,v,i,o]);const w=c.useRef(!Cs(i)&&i);return t.jsx(s.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??w.current,required:u,disabled:m,name:h,value:x,form:p,...r,tabIndex:-1,ref:b,style:{...r.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function ys(e){return"function"==typeof e}function Cs(e){return"indeterminate"===e}function Ss(e){return Cs(e)?"indeterminate":e?"checked":"unchecked"}function Es({className:e,...s}){return t.jsx(bs,{"data-slot":"checkbox",className:$("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:t.jsx(js,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:t.jsx(f,{className:"size-3.5"})})})}function ks({isOpen:e,onOpenChange:s,onVideoSelect:a,currentVideoUrl:r,videoPath:n}){const[l,o]=c.useState(null),[i,d]=c.useState(!1),[u,m]=c.useState(!1),[h,p]=c.useState(0),[g,f]=c.useState(null),[S,E]=c.useState(0),[k,T]=c.useState(0),[P,D]=c.useState(0),[O,R]=c.useState(!1),[L,I]=c.useState({isOpen:!1,title:"",message:"",isSuccess:!1}),A=c.useRef(null);c.useEffect(()=>{let e;return u&&g&&(e=setInterval(()=>{const e=Math.floor((Date.now()-g)/1e3);E(e)},1e3)),()=>{e&&clearInterval(e)}},[u,g]),c.useEffect(()=>{},[L]),c.useEffect(()=>{e&&os().then(e=>{R(e)}).catch(e=>{R(!1)})},[e]);const _=e=>{e&&e.type.startsWith("video/")?o(e):alert("Por favor, selecione um arquivo de vídeo válido.")},z=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?d(!0):"dragleave"===e.type&&d(!1)},M=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return t.jsxs(X,{open:e,onOpenChange:s,children:[t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white max-w-2xl",children:[t.jsxs(Q,{children:[t.jsx(Z,{children:"Upload de Vídeo"}),t.jsx(ee,{className:"text-neutral-400",children:"Selecione um arquivo de vídeo para esta aula."})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"relative border-2 border-dashed rounded-xl p-10 text-center transition-all duration-300 "+(i?"border-green-400 bg-green-400/5 scale-[1.02] shadow-lg shadow-green-400/10":"border-neutral-700 hover:border-neutral-600 hover:bg-neutral-900/30"),onDragEnter:z,onDragLeave:z,onDragOver:z,onDrop:e=>{e.preventDefault(),e.stopPropagation(),d(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&_(e.dataTransfer.files[0])},children:[t.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[t.jsx("div",{className:"p-4 rounded-full transition-all duration-300 "+(i?"bg-green-400/20":"bg-neutral-800"),children:t.jsx(b,{className:"h-10 w-10 transition-colors duration-300 "+(i?"text-green-400":"text-neutral-400")})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-xl font-semibold text-white",children:"Arraste e solte o vídeo aqui"}),t.jsx("p",{className:"text-sm text-neutral-400",children:"ou clique para selecionar da galeria"})]}),t.jsxs(H,{onClick:()=>A.current?.click(),className:"border border-green-600/50 text-green-400 hover:bg-green-600/10 hover:border-green-400 transition-all duration-300",children:[t.jsx(v,{className:"h-4 w-4 mr-2"}),"Selecionar Vídeo"]})]}),t.jsx("input",{ref:A,type:"file",accept:"video/*",onChange:e=>{const t=e.target.files[0];t&&_(t)},className:"hidden"})]}),l&&t.jsxs("div",{className:"bg-neutral-900/50 rounded-xl p-6 border border-neutral-800",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"p-3 bg-green-400/10 rounded-lg",children:t.jsx(v,{className:"h-8 w-8 text-green-400"})}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("p",{className:"text-sm font-semibold text-white truncate max-w-xs",children:l.name}),t.jsxs("p",{className:"text-xs text-neutral-400 flex items-center gap-2",children:[t.jsx(j,{className:"h-3 w-3"}),M(l.size)]})]})]}),!u&&t.jsx(H,{variant:"ghost",size:"sm",onClick:()=>o(null),className:"text-red-400 hover:text-red-300 hover:bg-red-900/20 transition-colors duration-200",children:t.jsx(w,{className:"h-4 w-4"})})]}),u&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin",children:t.jsx(b,{className:"h-4 w-4 text-green-400"})}),t.jsx("span",{className:"text-sm font-medium text-green-400",children:"Fazendo upload..."})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsxs("span",{className:"text-sm font-semibold text-green-400",children:[h,"%"]}),t.jsxs("div",{className:"flex items-center space-x-1 text-xs text-neutral-500",children:[t.jsx(x,{className:"h-3 w-3"}),t.jsx("span",{children:(e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`})(S)})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(Wt,{value:h,className:"h-3 bg-neutral-800"}),t.jsx("div",{className:"h-1 bg-neutral-800 rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-linear-to-r from-green-400 to-green-600 rounded-full transition-all duration-300 ease-out",style:{width:`${h}%`}})})]}),P>1&&t.jsxs("div",{className:"bg-linear-to-r from-green-400/5 to-green-600/5 border border-green-600/20 rounded-xl p-4",children:[t.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"p-2 bg-green-400/10 rounded-lg",children:t.jsx(N,{className:"h-4 w-4 text-green-400"})}),t.jsxs("div",{children:[t.jsx("span",{className:"text-sm font-semibold text-green-400",children:"Upload em Partes"}),t.jsx("p",{className:"text-xs text-neutral-400",children:"Arquivo grande dividido para melhor performance"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs",children:[t.jsxs("div",{className:"flex justify-between items-center p-2 bg-neutral-800/50 rounded-lg",children:[t.jsx("span",{className:"text-neutral-400",children:"Parte atual"}),t.jsxs("span",{className:"font-semibold text-green-400",children:[k," de ",P]})]}),t.jsxs("div",{className:"flex justify-between items-center p-2 bg-neutral-800/50 rounded-lg",children:[t.jsx("span",{className:"text-neutral-400",children:"Tamanho total"}),t.jsx("span",{className:"font-semibold text-white",children:M(l.size)})]}),t.jsxs("div",{className:"flex justify-between items-center p-2 bg-neutral-800/50 rounded-lg",children:[t.jsx("span",{className:"text-neutral-400",children:"Tamanho da parte"}),t.jsx("span",{className:"font-semibold text-white",children:"50MB"})]})]})]})]}),!u&&t.jsx("div",{className:"mt-4",children:t.jsx("div",{className:"bg-black rounded-lg overflow-hidden border border-neutral-800",children:t.jsx("video",{src:URL.createObjectURL(l),className:"w-full",controls:!0,style:{maxHeight:"200px"}})})})]}),r&&!l&&t.jsxs("div",{className:"bg-neutral-900/50 rounded-xl p-6 border border-neutral-800",children:[t.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[t.jsx(v,{className:"h-4 w-4 text-neutral-400"}),t.jsx("p",{className:"text-sm font-medium text-neutral-400",children:"Vídeo atual:"})]}),t.jsx("div",{className:"bg-black rounded-lg overflow-hidden border border-neutral-800",children:t.jsx("video",{src:r,className:"w-full",controls:!0,style:{maxHeight:"200px"}})})]})]}),t.jsxs(de,{className:"gap-3",children:[t.jsx(H,{onClick:()=>{o(null),s(!1)},className:"border border-neutral-700 text-white hover:bg-neutral-800 transition-colors duration-200",children:"Cancelar"}),t.jsx(H,{onClick:async()=>{if(l)try{m(!0),p(0),f(Date.now()),E(0);const e=52428800,t=Math.ceil(l.size/e);D(t),T(0);const r=await ls(l,e=>{p(e);const s=Math.min(Math.floor(e/100*t),t-1);T(s+1)},n),i=r&&(200===r.StatusCode||200===r.status);if(I({isOpen:!0,title:i?"Resposta do Servidor":"Erro no Upload",message:i?r?.StatusMessage||r?.message||"Upload processado com sucesso":r?.StatusMessage||r?.message||r?.error||"Ocorreu um erro ao fazer upload do vídeo. Tente novamente.",isSuccess:i}),i){const e=r?.Result?.url||r?.url||URL.createObjectURL(l);a({file:l,url:e,name:l.name,size:l.size,type:l.type}),setTimeout(()=>{o(null),p(0),f(null),E(0),T(0),D(0),s(!1)},2e3)}else p(0),f(null),E(0),T(0),D(0)}finally{m(!1)}},className:"font-medium transition-all duration-200 "+(O?"bg-neutral-700 hover:bg-neutral-600 text-neutral-300 cursor-not-allowed border border-neutral-600":"bg-linear-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 text-white shadow-lg shadow-green-600/25"),disabled:!l||u||O,children:u?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin",children:t.jsx(b,{className:"h-4 w-4"})}),t.jsx("span",{children:"Enviando..."})]}):O?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-pulse",children:t.jsx(x,{className:"h-4 w-4"})}),t.jsx("span",{children:"Processando"})]}):t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(b,{className:"h-4 w-4"}),t.jsx("span",{children:"Fazer Upload"})]})})]})]}),t.jsx(X,{open:L.isOpen,onOpenChange:e=>I(t=>({...t,isOpen:e})),children:t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white max-w-md",children:[t.jsx(Q,{children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"p-3 rounded-full transition-all duration-300 "+(L.isSuccess?"bg-green-400/20 text-green-400 shadow-lg shadow-green-400/25":"bg-red-400/20 text-red-400 shadow-lg shadow-red-400/25"),children:L.isSuccess?t.jsx(y,{className:"h-6 w-6"}):t.jsx(C,{className:"h-6 w-6"})}),t.jsxs("div",{className:"space-y-1",children:[t.jsx(Z,{className:"text-lg font-semibold "+(L.isSuccess?"text-green-400":"text-red-400"),children:L.title}),t.jsx("p",{className:"text-sm text-neutral-400",children:L.isSuccess?"Operação concluída com sucesso":"Ocorreu um erro inesperado"})]})]})}),t.jsx("div",{className:"py-2",children:t.jsx(ee,{className:"text-neutral-300 leading-relaxed",children:L.message})}),t.jsx(de,{className:"gap-2",children:t.jsx(H,{onClick:()=>I(e=>({...e,isOpen:!1})),className:"font-medium transition-all duration-200 "+(L.isSuccess?"bg-linear-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 text-white shadow-lg shadow-green-600/25":"bg-linear-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 text-white shadow-lg shadow-red-600/25"),children:L.isSuccess?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(y,{className:"h-4 w-4"}),t.jsx("span",{children:"OK"})]}):t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(w,{className:"h-4 w-4"}),t.jsx("span",{children:"Fechar"})]})})})]})})]})}function Ts({isOpen:e,onOpenChange:s,lesson:a,onSaveLesson:r,categories:n,isLoading:l=!1}){const[o,i]=c.useState(""),[u,m]=c.useState(""),[h,x]=c.useState(""),[p,g]=c.useState(""),[f,v]=c.useState(!1),[j,w]=c.useState(!1);c.useEffect(()=>{a&&(i(a.title||""),m(a.duration||""),x(a.description||""),g(a.videoUrl||""),v(a.isPaid||!1))},[a]);return t.jsxs(t.Fragment,{children:[t.jsx(X,{open:e,onOpenChange:s,children:t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white",children:[t.jsxs(Q,{children:[t.jsx(Z,{children:"Editar Aula"}),t.jsx(ee,{className:"text-neutral-400",children:"Modifique as informações da aula."})]}),t.jsxs("div",{className:"py-4 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-white mb-2 block",children:"Título da Aula"}),t.jsx(ot,{value:o,onChange:e=>i(e.target.value),className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"Título da aula"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-white mb-2 block",children:"Duração"}),t.jsx(ot,{value:u,onChange:e=>m(e.target.value),className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"Duração (ex: 15:30)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-white mb-2 block",children:"Descrição"}),t.jsx("textarea",{value:h,onChange:e=>x(e.target.value),className:"w-full bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500 rounded-md px-3 py-2 text-sm resize-none h-20 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Descrição da aula",rows:3,required:!0})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(Es,{id:"isPaid",checked:f,onCheckedChange:v,className:"bg-neutral-900 border-neutral-700 data-[state=checked]:bg-green-600 data-[state=checked]:border-green-600"}),t.jsx("label",{htmlFor:"isPaid",className:"text-sm font-medium text-white cursor-pointer",children:"Aula Paga (Bloqueada)"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-white mb-2 block",children:"Vídeo da Aula"}),t.jsxs("div",{className:"space-y-3",children:[p&&t.jsx("div",{className:"bg-neutral-900/50 rounded-lg p-3",children:t.jsx("video",{src:p,className:"w-full rounded-lg bg-black",controls:!0,style:{maxHeight:"150px"}})}),t.jsxs(H,{onClick:()=>w(!0),className:"w-full border border-neutral-700 text-white hover:bg-neutral-800",children:[t.jsx(b,{className:"h-4 w-4 mr-2"}),p?"Trocar Vídeo":"Upload de Vídeo"]})]})]})]}),t.jsxs(de,{children:[t.jsx(H,{onClick:()=>s(!1),className:"border border-neutral-700 text-white hover:bg-neutral-800",disabled:l,children:"Cancelar"}),t.jsx(H,{onClick:async()=>{if(o.trim()&&u.trim()&&h.trim())try{await r({...a,title:o.trim(),duration:u.trim(),description:h.trim(),videoUrl:p,isPaid:f}),s(!1)}catch{}},className:"bg-green-600 hover:bg-green-700",disabled:!o.trim()||!u.trim()||!h.trim()||l,children:l?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar Alterações"})]})]})}),t.jsx(ks,{isOpen:j,onOpenChange:w,onVideoSelect:e=>{g(e.url)},currentVideoUrl:p,videoPath:a&&a.id?`l${a.id}`:null})]})}function Ps({lesson:e,onEditLesson:s}){return t.jsx(H,{variant:"ghost",size:"sm",className:"text-neutral-400 hover:text-white hover:bg-neutral-700",onClick:t=>{t.stopPropagation(),s(e)},children:t.jsx(S,{className:"h-3 w-3"})})}function Ds({lesson:e,onEditLesson:s}){return t.jsxs(H,{variant:"ghost",size:"sm",className:"border border-neutral-700 hover:bg-neutral-900",onClick:()=>s(e),children:[t.jsx(S,{className:"h-4 w-4 mr-2"}),"Editar Aula"]})}function Os({category:e,isExpanded:s,onToggle:a,onSelect:r,isSelected:n,expandedCourses:l,onCourseToggle:o,onCourseSelect:i,onLessonSelect:c,selected:u,onEditLesson:m,onDeleteCategory:h,onDeleteCourse:x,onDeleteLesson:p,onEditCategory:g,onEditCourse:f,loadingCourses:b={},loadingLessons:v={}}){return t.jsxs("div",{className:"rounded-xl border border-neutral-800 bg-neutral-900/30",children:[t.jsxs("button",{type:"button",className:"w-full flex items-center justify-between gap-3 px-3 py-3 hover:bg-neutral-800/30 transition-colors rounded-xl "+(n?"bg-neutral-800/50":""),onClick:()=>{a(e.id),r({type:"category",categoryId:e.id,courseId:null,lessonId:null})},children:[t.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-green-600/15 border border-green-500/20 shrink-0",children:t.jsx(E,{className:"h-4 w-4 text-green-400"})}),t.jsxs("div",{className:"min-w-0 text-left",children:[t.jsx("div",{className:"text-sm font-semibold text-white truncate",children:e.name}),s&&t.jsxs("div",{className:"text-xs text-neutral-400",children:[e.courses.length," curso",1!==e.courses.length?"s":""]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[t.jsx(H,{variant:"ghost",size:"sm",className:"text-neutral-400 hover:text-white hover:bg-neutral-700",onClick:t=>{t.stopPropagation(),g(e)},children:t.jsx(S,{className:"h-4 w-4"})}),t.jsx(H,{variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",onClick:t=>{t.stopPropagation(),h(e.id)},children:t.jsx(k,{className:"h-4 w-4"})}),s?t.jsx(T,{className:"h-4 w-4 text-neutral-400"}):t.jsx(P,{className:"h-4 w-4 text-neutral-400"})]})]}),s&&t.jsx("div",{className:"px-3 pb-3 space-y-2 mt-2",children:b[e.id]?t.jsxs("div",{className:"flex items-center gap-2 py-3 px-3 rounded-lg bg-neutral-800/30 text-sm text-neutral-400",children:[t.jsx(d,{className:"h-4 w-4 animate-spin shrink-0"}),"Carregando cursos..."]}):t.jsx(t.Fragment,{children:0===e.courses.length?t.jsx("div",{className:"py-3 px-3 rounded-lg bg-neutral-900/40 border border-dashed border-neutral-700 text-xs text-neutral-400",children:"Nenhum curso cadastrado nesta categoria ainda."}):e.courses.map(s=>t.jsx(Rs,{course:s,category:e,isExpanded:l.has(s.id),onToggle:o,onSelect:i,isSelected:"course"===u.type&&u.courseId===s.id,onLessonSelect:c,selected:u,onEditLesson:m,onDeleteCourse:x,onDeleteLesson:p,onEditCourse:f,loadingLessons:v},s.id))})})]})}function Rs({course:e,category:s,isExpanded:a,onToggle:r,onSelect:n,isSelected:l,onLessonSelect:o,selected:i,onEditLesson:c,onDeleteCourse:u,onDeleteLesson:m,onEditCourse:h,loadingLessons:x={}}){return t.jsxs("div",{className:"rounded-lg border border-neutral-800 bg-neutral-950/40",children:[t.jsxs("button",{type:"button",className:"w-full flex items-center justify-between gap-3 px-3 py-2 hover:bg-neutral-800/30 transition-colors rounded-lg "+(l?"bg-neutral-800/50":""),onClick:()=>{r(e.id),n({type:"course",categoryId:s.id,courseId:e.id,lessonId:null})},children:[t.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[t.jsx(D,{className:"h-4 w-4 text-emerald-400 shrink-0"}),t.jsxs("div",{className:"min-w-0 text-left",children:[t.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.title}),a&&t.jsxs("div",{className:"text-xs text-neutral-400",children:[e.lessons?.length||0," aula",1!==(e.lessons?.length||0)?"s":""]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[t.jsx(H,{variant:"ghost",size:"sm",className:"text-neutral-400 hover:text-white hover:bg-neutral-700",onClick:t=>{t.stopPropagation(),h(s.id,e)},children:t.jsx(S,{className:"h-3 w-3"})}),t.jsx(H,{variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",onClick:t=>{t.stopPropagation(),u(s.id,e.id)},children:t.jsx(k,{className:"h-3 w-3"})}),a?t.jsx(T,{className:"h-4 w-4 text-neutral-400"}):t.jsx(P,{className:"h-4 w-4 text-neutral-400"})]})]}),a&&t.jsx("div",{className:"px-3 pb-3 space-y-2 mt-2",children:x[e.id]?t.jsxs("div",{className:"flex items-center gap-2 py-2 px-3 rounded-lg bg-neutral-800/20 text-sm text-neutral-400",children:[t.jsx(d,{className:"h-3 w-3 animate-spin shrink-0"}),"Carregando aulas..."]}):t.jsx(t.Fragment,{children:0===(e.lessons||[]).length?t.jsx("div",{className:"py-2 px-3 rounded-lg bg-neutral-900/40 border border-dashed border-neutral-700 text-xs text-neutral-400",children:"Nenhuma aula cadastrada neste curso ainda."}):(e.lessons||[]).map(a=>t.jsx(Ls,{lesson:a,onSelect:o,isSelected:"lesson"===i.type&&i.lessonId===a.id,category:s,course:e,onEditLesson:c,onDeleteLesson:m},a.id))})})]})}function Ls({lesson:e,onSelect:s,isSelected:a,category:r,course:n,onEditLesson:l,onDeleteLesson:o}){return t.jsxs("button",{type:"button",className:"w-full flex items-center justify-between gap-3 px-3 py-2 rounded-lg bg-neutral-800/20 hover:bg-neutral-800/40 transition-colors "+(a?"bg-neutral-800/50":""),onClick:()=>s({type:"lesson",categoryId:r.id,courseId:n.id,lessonId:e.id}),children:[t.jsxs("div",{className:"flex items-center gap-3 min-w-0 text-left",children:[t.jsx(O,{className:"h-3 w-3 text-neutral-300 shrink-0"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.title}),t.jsx("div",{className:"text-xs text-neutral-400",children:e.duration})]})]}),t.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[t.jsx(Ps,{lesson:e,onEditLesson:l}),t.jsx(H,{variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300 hover:bg-red-900/20",onClick:t=>{t.stopPropagation(),o(r.id,n.id,e.id)},children:t.jsx(k,{className:"h-3 w-3"})})]})]},e.id)}function Is({selectedData:e,selected:s,onEditLesson:a,onDeleteCategory:r,onDeleteCourse:n,onDeleteLesson:l,onEditCategory:o,onEditCourse:i,lessonDialogProps:c}){return t.jsxs("div",{className:"rounded-xl border border-neutral-800 bg-neutral-900/40 p-4 space-y-4",children:[!e.category&&t.jsxs("div",{className:"flex items-center gap-3 rounded-lg border border-dashed border-neutral-700 bg-neutral-950/40 px-3 py-3 text-xs text-neutral-400",children:[t.jsx(E,{className:"h-4 w-4 text-neutral-500 shrink-0"}),t.jsx("span",{children:"Selecione uma categoria, curso ou aula na árvore ao lado."})]}),e.category&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"mt-1 flex h-7 w-7 items-center justify-center rounded-md bg-green-600/15 border border-green-500/30 shrink-0",children:t.jsx(E,{className:"h-4 w-4 text-green-400"})}),t.jsx("div",{className:"min-w-0 flex-1",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-[11px] font-medium uppercase tracking-wide text-green-400/80",children:"Categoria"}),t.jsx("div",{className:"text-sm sm:text-base font-semibold text-white truncate",children:e.category.name}),t.jsxs("div",{className:"mt-1 text-xs text-neutral-400",children:[e.category.courses.length," curso",1!==e.category.courses.length?"s":""]})]}),t.jsxs("div",{className:"flex gap-1 shrink-0",children:[t.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 text-neutral-300 hover:text-white hover:bg-neutral-800/80 border border-neutral-700/70",onClick:()=>{o(e.category)},children:t.jsx(S,{className:"h-3.5 w-3.5"})}),t.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-400 hover:text-red-300 hover:bg-red-900/30 border border-red-600/40",onClick:()=>{r(e.category.id)},children:t.jsx(k,{className:"h-3.5 w-3.5"})})]})]})})]}),e.course&&t.jsxs("div",{className:"ml-3 pl-4 border-l border-dashed border-neutral-800/80 space-y-3",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"mt-1 flex h-7 w-7 items-center justify-center rounded-md bg-emerald-500/10 border border-emerald-500/30 shrink-0",children:t.jsx(D,{className:"h-4 w-4 text-emerald-300"})}),t.jsx("div",{className:"min-w-0 flex-1",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-[11px] font-medium uppercase tracking-wide text-emerald-300/80",children:"Curso"}),t.jsx("div",{className:"text-sm sm:text-base font-semibold text-white",children:e.course.title}),t.jsxs("div",{className:"mt-1 text-xs text-neutral-400",children:[e.course.lessons.length," aula",1!==e.course.lessons.length?"s":""]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 shrink-0",children:[t.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 text-neutral-300 hover:text-white hover:bg-neutral-800/80 border border-neutral-700/70",onClick:()=>{i(s.categoryId,e.course)},children:t.jsx(S,{className:"h-3.5 w-3.5"})}),t.jsx(ds,{...c}),t.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-400 hover:text-red-300 hover:bg-red-900/30 border border-red-600/40",onClick:()=>{n(s.categoryId,e.course.id)},children:t.jsx(k,{className:"h-3.5 w-3.5"})})]})]})})]}),e.lesson&&t.jsx("div",{className:"ml-3 pl-4 border-l border-dashed border-neutral-800/80",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"mt-1 flex h-7 w-7 items-center justify-center rounded-md bg-neutral-500/10 border border-neutral-500/40 shrink-0",children:t.jsx(O,{className:"h-4 w-4 text-neutral-200"})}),t.jsx("div",{className:"min-w-0 flex-1",children:t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"text-[11px] font-medium uppercase tracking-wide text-neutral-300/80",children:"Aula"}),t.jsx("div",{className:"text-sm sm:text-base font-semibold text-white",children:e.lesson.title}),t.jsxs("div",{className:"mt-1 text-xs text-neutral-400",children:["Duração: ",e.lesson.duration]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-1 shrink-0",children:[t.jsx(Ds,{lesson:e.lesson,onEditLesson:a}),t.jsx(H,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-400 hover:text-red-300 hover:bg-red-900/30 border border-red-600/40",onClick:()=>{l(s.categoryId,s.courseId,e.lesson.id)},children:t.jsx(k,{className:"h-3.5 w-3.5"})})]})]})})]})})]})]})]})}function As({query:e,onQueryChange:s,categoryDialogProps:a,courseDialogProps:r,lessonDialogProps:n}){return t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[t.jsx("div",{className:"flex-1",children:t.jsx(ot,{value:e,onChange:e=>s(e.target.value),className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"Buscar categoria, curso ou aula..."})}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[t.jsx(is,{...a}),t.jsx(cs,{...r}),t.jsx(ds,{...n})]})]})}Ns.displayName=ws;const _s={async getUsers(){try{const e=ce();if(!e)throw new Error("Token de autenticação não encontrado");const t=await fetch(ae.USERS,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Erro na requisição: ${t.status}`);return await t.json()}catch(e){throw e}},async updateUserName(e,t){try{const s=ce();if(!s)throw new Error("Token de autenticação não encontrado");const a=await fetch(`${ae.USERS}/update-name`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({userId:e,name:t})});if(!a.ok)throw new Error(`Erro na requisição: ${a.status}`);return await a.json()}catch(s){throw s}},async updateUserEmail(e,t){try{const s=ce();if(!s)throw new Error("Token de autenticação não encontrado");const a=await fetch(`${ae.USERS}/update-email`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({userId:e,email:t})});if(!a.ok)throw new Error(`Erro na requisição: ${a.status}`);return await a.json()}catch(s){throw s}},async updateUserStatus(e,t){try{const s=ce();if(!s)throw new Error("Token de autenticação não encontrado");const a=await fetch(`${ae.USERS}/update-status`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({userId:e,status:t})});if(!a.ok)throw new Error(`Erro na requisição: ${a.status}`);return await a.json()}catch(s){throw s}},async updateUserRole(e,t){try{const s=ce();if(!s)throw new Error("Token de autenticação não encontrado");const a=await fetch(`${ae.USERS}/update-role`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({userId:e,isAdmin:t})});if(!a.ok)throw new Error(`Erro na requisição: ${a.status}`);return await a.json()}catch(s){throw s}},async deleteUser(e){try{const t=ce();if(!t)throw new Error("Token de autenticação não encontrado");const s=await fetch(`${ae.USERS}/delete`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(!s.ok)throw new Error(`Erro na requisição: ${s.status}`);return await s.json()}catch(t){throw t}}},zs={ativo:"Ativo",analise:"Em análise",banido:"Banido"},Ms={aluno:"Aluno",admin:"Administrador"};function Fs(){const[e,s]=c.useState(""),[a,r]=c.useState("todos"),[n,l]=c.useState([]),[o,i]=c.useState(!0),[d,u]=c.useState(null),[m,h]=c.useState({show:!1,message:"",variant:"default"}),x=(e,t="default")=>{h({show:!0,message:e,variant:t}),setTimeout(()=>{h({show:!1,message:"",variant:"default"})},5e3)},p=e=>{l(t=>t.map(t=>t.id===e.id?e:t))},g=async e=>{try{const t=await _s.deleteUser(e);200===t.StatusCode?(l(t=>t.filter(t=>t.id!==e)),x("Usuário excluído com sucesso","default")):x(t.StatusMessage||"Erro ao excluir usuário","destructive")}catch(t){x("Erro ao conectar com o servidor","destructive")}};c.useEffect(()=>{(async()=>{try{i(!0);const e=await _s.getUsers();if(200===e.StatusCode){const t=e.Result.map(e=>({id:e.id.toString(),name:e.fullname,email:e.email,role:e.isadmin?"admin":"aluno",status:e.banned?"banido":"ativo",lastAccess:e.last_access?f(e.last_access):"Nunca"}));l(t)}else x(e.StatusMessage||"Erro ao carregar usuários","destructive"),u(e.StatusMessage||"Erro ao carregar usuários")}catch(e){x("Não foi possível carregar os usuários","destructive"),u("Não foi possível carregar os usuários")}finally{i(!1)}})()},[]);const f=e=>{try{const t=new Date(e),s=new Date-t,a=Math.floor(s/36e5),r=Math.floor(a/24);return a<1?"Agora mesmo":a<24?`Há ${a} horas`:1===r?"Ontem":r<30?`Há ${r} dias`:r<365?`Há ${Math.floor(r/30)} meses`:`Há ${Math.floor(r/365)} anos`}catch{return"Data inválida"}},b=c.useMemo(()=>{const t=e.trim().toLowerCase();return n.filter(e=>("todos"===a||e.status===a)&&(!t||(e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.id.toLowerCase().includes(t))))},[e,a,n]),v=n.length,j=n.filter(e=>"ativo"===e.status).length;return n.filter(e=>"analise"===e.status).length,o?t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto mb-4"}),t.jsx("p",{className:"text-neutral-400",children:"Carregando usuários..."})]})})}):d?t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-red-400 mb-4",children:t.jsx(R,{className:"h-8 w-8 mx-auto"})}),t.jsx("p",{className:"text-red-400 mb-2",children:d}),t.jsx("button",{onClick:()=>window.location.reload(),className:"text-green-400 hover:text-green-300 text-sm underline",children:"Tentar novamente"})]})})}):t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-white",children:"Usuários da plataforma"}),t.jsx("p",{className:"text-xs sm:text-sm text-neutral-400 max-w-xl",children:"Visão geral dos alunos e administradores da Ring0X. Use os filtros abaixo para encontrar rapidamente quem você precisa."})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 text-xs sm:text-sm",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 rounded-lg bg-neutral-900/70 border border-neutral-800 px-3 py-2",children:[t.jsx(L,{className:"h-3.5 w-3.5 text-green-400"}),t.jsxs("span",{className:"text-neutral-300",children:[t.jsx("span",{className:"font-semibold text-white",children:j})," ","ativos"]})]}),t.jsxs("div",{className:"inline-flex items-center gap-2 rounded-lg bg-neutral-900/70 border border-neutral-800 px-3 py-2",children:[t.jsx(I,{className:"h-3.5 w-3.5 text-neutral-300"}),t.jsxs("span",{className:"text-neutral-300",children:[t.jsx("span",{className:"font-semibold text-white",children:v})," no total"]})]})]})]}),m.show&&t.jsx(te,{variant:m.variant,className:"mt-4",children:t.jsx(se,{children:m.message})}),t.jsxs(ne,{className:"bg-neutral-950 border-neutral-800 text-white shadow-2xl",children:[t.jsxs(oe,{className:"pb-3 space-y-3",children:[t.jsx(ie,{className:"text-base sm:text-lg font-semibold",children:"Gestão de usuários"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(ot,{value:e,onChange:e=>s(e.target.value),className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500 h-9 sm:h-10 w-full",placeholder:"Buscar por nome, email ou ID..."}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(Us,{label:"Todos",isActive:"todos"===a,onClick:()=>r("todos")}),t.jsx(Us,{label:"Ativos",isActive:"ativo"===a,onClick:()=>r("ativo")}),t.jsx(Us,{label:"Em análise",isActive:"analise"===a,onClick:()=>r("analise")}),t.jsx(Us,{label:"Banidos",isActive:"banido"===a,onClick:()=>r("banido")})]})]})]}),t.jsx(le,{className:"pt-0",children:t.jsxs("div",{className:"rounded-xl border border-neutral-800 bg-neutral-900/40 overflow-hidden",children:[t.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-3 px-4 py-3 text-xs font-medium text-neutral-400 border-b border-neutral-800 bg-neutral-900/70",children:[t.jsx("span",{className:"col-span-4",children:"Usuário"}),t.jsx("span",{className:"col-span-3",children:"Contato"}),t.jsx("span",{className:"col-span-2",children:"Perfil"}),t.jsx("span",{className:"col-span-2",children:"Status"}),t.jsx("span",{className:"col-span-1 text-right",children:"Último acesso"})]}),t.jsx(Ze,{className:"h-[400px] sm:h-[430px]",children:t.jsx("div",{className:"divide-y divide-neutral-800/80",children:0===b.length?t.jsx("div",{className:"px-4 py-10 text-center text-sm text-neutral-400",children:"Nenhum usuário encontrado com os filtros atuais."}):b.map(e=>t.jsx(qs,{user:e,onUpdate:p,onDelete:g,showAlert:x},e.id))})})]})})]})]})}function Us({label:e,isActive:s,onClick:a}){return t.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:a,className:"h-8 rounded-full border text-xs px-3 transition-colors "+(s?"border-green-500 bg-green-600/20 text-green-300":"border-neutral-700 bg-neutral-900/60 text-neutral-300 hover:bg-neutral-800/80"),children:e})}function qs({user:e,onUpdate:s,onDelete:a,showAlert:r}){const n="admin"===e.role,[l,o]=c.useState(null),[i,d]=c.useState({name:e.name,email:e.email,status:e.status,role:e.role}),[u,m]=c.useState(!1),[h,x]=c.useState(!1),[p,g]=c.useState(!1);c.useEffect(()=>{d({name:e.name,email:e.email,status:e.status,role:e.role}),o(null),m(!1),x(!1)},[e]);const b=e=>{o(e)},v=()=>{o(null),m(!1),x(!1),d({name:e.name,email:e.email,status:e.status,role:e.role})},j=async()=>{g(!0);try{await a(e.id),x(!1)}catch(t){}finally{g(!1)}},N=async t=>{g(!0);try{let a,n;switch(t){case"name":a=_s.updateUserName,n=i.name;break;case"email":a=_s.updateUserEmail,n=i.email;break;case"status":a=_s.updateUserStatus,n=i.status;break;case"role":a=_s.updateUserRole,n="admin"===i.role;break;default:return}const l=await a(e.id,n);if(200===l.StatusCode){const a={...e};"name"===t&&(a.name=i.name),"email"===t&&(a.email=i.email),"status"===t&&(a.status=i.status),"role"===t&&(a.role=i.role),s(a),o(null),m(!1);r(`${{name:"Nome",email:"E-mail",status:"Status",role:"Perfil"}[t]} atualizado com sucesso`,"default")}else r(l.StatusMessage||`Erro ao atualizar ${t}`,"destructive")}catch(a){r("Erro ao conectar com o servidor","destructive")}finally{g(!1)}},y=c.useCallback(()=>{const t="ativo"===e.status?"banido":"ativo";d(e=>({...e,status:t})),C(t)},[e.status]),C=c.useCallback(async t=>{g(!0);try{const a=await _s.updateUserStatus(e.id,t);if(200===a.StatusCode){const a={...e,status:t};s(a),r("Status atualizado com sucesso","default")}else d(t=>({...t,status:e.status})),r(a.StatusMessage||"Erro ao atualizar status","destructive")}catch(a){d(t=>({...t,status:e.status})),r("Erro ao conectar com o servidor","destructive")}finally{g(!1)}},[e.id,e.status,s,r]),S=c.useCallback(()=>{"aluno"===e.role?m(!0):(d(e=>({...e,role:"aluno"})),T("aluno"))},[e.role]),E=c.useCallback(()=>{d(e=>({...e,role:"admin"})),T("admin")},[]),T=c.useCallback(async t=>{g(!0);try{const a="admin"===t,n=await _s.updateUserRole(e.id,a);if(200===n.StatusCode){const a={...e,role:t};s(a),m(!1),r("Perfil atualizado com sucesso","default")}else d(t=>({...t,role:e.role})),m(!1),r(n.StatusMessage||"Erro ao atualizar perfil","destructive")}catch(a){d(t=>({...t,role:e.role})),m(!1),r("Erro ao conectar com o servidor","destructive")}finally{g(!1)}},[e.id,e.role,s,r]);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"px-4 py-3 space-y-3 md:hidden",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(H,{size:"sm",onClick:()=>x(!0),className:"h-8 w-8 p-0 bg-red-600/10 border border-red-500/40 text-red-400 hover:bg-red-600/20 shrink-0",title:"Excluir usuário",children:t.jsx(k,{className:"h-4 w-4"})}),t.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-neutral-800 border border-neutral-700 shrink-0",children:t.jsx(I,{className:"h-4 w-4 text-neutral-200"})}),t.jsx("div",{className:"space-y-0.5 min-w-0 flex-1",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(Tt,{className:"bg-neutral-800/50 border border-neutral-700 text-neutral-400 text-[10px] font-mono",children:["ID: ",e.id]}),"name"===l?t.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[t.jsx(ot,{value:i.name,onChange:e=>d({...i,name:e.target.value}),className:"bg-neutral-800 border-neutral-600 text-white text-sm h-7",disabled:p,autoFocus:!0}),t.jsx(H,{size:"sm",onClick:()=>N("name"),disabled:p,className:"h-7 w-7 p-0 bg-green-600 hover:bg-green-500",children:t.jsx(f,{className:"h-3 w-3"})}),t.jsx(H,{size:"sm",onClick:v,disabled:p,className:"h-7 w-7 p-0 bg-neutral-600 hover:bg-neutral-500",children:t.jsx(w,{className:"h-3 w-3"})})]}):t.jsx("span",{className:"text-sm font-semibold text-white truncate cursor-pointer hover:bg-neutral-800 px-2 py-1 rounded",onDoubleClick:()=>b("name"),children:e.name}),n&&t.jsx(Tt,{className:"bg-emerald-600/20 border border-emerald-500/40 text-emerald-200 text-[10px] uppercase tracking-wide",children:"Admin"})]})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-300",children:[t.jsx(A,{className:"h-3.5 w-3.5 text-neutral-400 shrink-0"}),"email"===l?t.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[t.jsx(ot,{value:i.email,onChange:e=>d({...i,email:e.target.value}),className:"bg-neutral-800 border-neutral-600 text-white text-xs h-7",disabled:p,autoFocus:!0}),t.jsx(H,{size:"sm",onClick:()=>N("email"),disabled:p,className:"h-7 w-7 p-0 bg-green-600 hover:bg-green-500",children:t.jsx(f,{className:"h-3 w-3"})}),t.jsx(H,{size:"sm",onClick:v,disabled:p,className:"h-7 w-7 p-0 bg-neutral-600 hover:bg-neutral-500",children:t.jsx(w,{className:"h-3 w-3"})})]}):t.jsx("span",{className:"truncate cursor-pointer hover:bg-neutral-800 px-2 py-1 rounded flex-1",onDoubleClick:()=>b("email"),children:e.email})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx(Tt,{className:"bg-neutral-800 border border-neutral-700 text-neutral-200 text-[11px] cursor-pointer hover:bg-neutral-700",onClick:S,children:Ms[i.role]||i.role}),"ativo"===i.status&&t.jsxs(Tt,{className:"bg-emerald-600/15 border border-emerald-500/40 text-emerald-200 text-[11px] inline-flex items-center gap-1 cursor-pointer hover:bg-emerald-600/25",onClick:y,children:[t.jsx(_,{className:"h-3 w-3"}),zs[i.status]]}),"analise"===i.status&&t.jsxs(Tt,{className:"bg-amber-500/10 border border-amber-400/40 text-amber-200 text-[11px] inline-flex items-center gap-1 cursor-pointer hover:bg-amber-500/20",onClick:y,children:[t.jsx(L,{className:"h-3 w-3"}),zs[i.status]]}),"banido"===i.status&&t.jsxs(Tt,{className:"bg-red-600/10 border border-red-500/40 text-red-200 text-[11px] inline-flex items-center gap-1 cursor-pointer hover:bg-red-600/20",onClick:y,children:[t.jsx(R,{className:"h-3 w-3"}),zs[i.status]]})]}),t.jsxs("div",{className:"text-xs text-neutral-400",children:["Último acesso: ",e.lastAccess]}),u&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-neutral-900 border border-neutral-700 rounded-lg p-4 max-w-sm w-full",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx(z,{className:"h-5 w-5 text-amber-400"}),t.jsx("h3",{className:"text-white font-semibold",children:"Confirmar mudança de perfil"})]}),t.jsx("p",{className:"text-neutral-300 text-sm mb-4",children:"Tem certeza que deseja promover este usuário para Administrador? Esta ação concederá acesso completo ao painel administrativo."}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx(H,{onClick:()=>m(!1),className:"bg-neutral-700 hover:bg-neutral-600",children:"Cancelar"}),t.jsx(H,{onClick:E,className:"bg-green-600 hover:bg-green-500",disabled:p,children:p?"Salvando...":"Confirmar"})]})]})}),h&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-neutral-900 border border-neutral-700 rounded-lg p-4 max-w-sm w-full",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx(k,{className:"h-5 w-5 text-red-400"}),t.jsx("h3",{className:"text-white font-semibold",children:"Confirmar exclusão"})]}),t.jsxs("p",{className:"text-neutral-300 text-sm mb-2",children:["Tem certeza que deseja excluir o usuário"," ",t.jsx("span",{className:"text-white font-semibold",children:e.name}),"?"]}),t.jsxs("p",{className:"text-neutral-400 text-xs mb-4",children:["ID: ",e.id," • ",e.email]}),t.jsx("p",{className:"text-red-400 text-sm mb-4",children:"⚠️ Esta ação não pode ser desfeita. Todos os dados do usuário serão permanentemente removidos."}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx(H,{onClick:()=>x(!1),className:"bg-neutral-700 hover:bg-neutral-600",disabled:p,children:"Cancelar"}),t.jsx(H,{onClick:j,className:"bg-red-600 hover:bg-red-500",disabled:p,children:p?"Excluindo...":"Excluir"})]})]})})]})]}),t.jsxs("div",{className:"px-4 py-3 hidden md:grid md:grid-cols-12 md:items-center md:gap-3 hover:bg-neutral-900/40 transition-colors",children:[t.jsxs("div",{className:"md:col-span-4 flex items-start gap-3",children:[t.jsx(H,{size:"sm",onClick:()=>x(!0),className:"h-8 w-8 p-0 bg-red-600/10 border border-red-500/40 text-red-400 hover:bg-red-600/20 shrink-0 mt-0.5",title:"Excluir usuário",children:t.jsx(k,{className:"h-4 w-4"})}),t.jsx("div",{className:"mt-0.5 flex h-9 w-9 items-center justify-center rounded-lg bg-neutral-800 border border-neutral-700 shrink-0",children:t.jsx(I,{className:"h-4 w-4 text-neutral-200"})}),t.jsx("div",{className:"space-y-0.5 min-w-0",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(Tt,{className:"bg-neutral-800/50 border border-neutral-700 text-neutral-400 text-[10px] font-mono",children:["ID: ",e.id]}),"name"===l?t.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[t.jsx(ot,{value:i.name,onChange:e=>d({...i,name:e.target.value}),className:"bg-neutral-800 border-neutral-600 text-white text-sm h-7",disabled:p,autoFocus:!0}),t.jsx(H,{size:"sm",onClick:()=>N("name"),disabled:p,className:"h-7 w-7 p-0 bg-green-600 hover:bg-green-500",children:t.jsx(f,{className:"h-3 w-3"})}),t.jsx(H,{size:"sm",onClick:v,disabled:p,className:"h-7 w-7 p-0 bg-neutral-600 hover:bg-neutral-500",children:t.jsx(w,{className:"h-3 w-3"})})]}):t.jsx("span",{className:"text-sm font-semibold text-white truncate cursor-pointer hover:bg-neutral-800 px-2 py-1 rounded",onDoubleClick:()=>b("name"),children:e.name}),n&&t.jsx(Tt,{className:"bg-emerald-600/20 border border-emerald-500/40 text-emerald-200 text-[10px] uppercase tracking-wide",children:"Admin"})]})})]}),t.jsxs("div",{className:"md:col-span-3 flex items-center gap-2 text-xs text-neutral-300",children:[t.jsx(A,{className:"h-3.5 w-3.5 text-neutral-400 shrink-0"}),"email"===l?t.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[t.jsx(ot,{value:i.email,onChange:e=>d({...i,email:e.target.value}),className:"bg-neutral-800 border-neutral-600 text-white text-xs h-7",disabled:p,autoFocus:!0}),t.jsx(H,{size:"sm",onClick:()=>N("email"),disabled:p,className:"h-7 w-7 p-0 bg-green-600 hover:bg-green-500",children:t.jsx(f,{className:"h-3 w-3"})}),t.jsx(H,{size:"sm",onClick:v,disabled:p,className:"h-7 w-7 p-0 bg-neutral-600 hover:bg-neutral-500",children:t.jsx(w,{className:"h-3 w-3"})})]}):t.jsx("span",{className:"truncate cursor-pointer hover:bg-neutral-800 px-2 py-1 rounded flex-1",onDoubleClick:()=>b("email"),children:e.email})]}),t.jsx("div",{className:"md:col-span-2 flex items-center gap-2 text-xs",children:t.jsx(Tt,{className:"bg-neutral-800 border border-neutral-700 text-neutral-200 text-[11px] cursor-pointer hover:bg-neutral-700",onClick:S,children:Ms[i.role]||i.role})}),t.jsxs("div",{className:"md:col-span-2 flex items-center gap-2 text-xs",children:["ativo"===i.status&&t.jsxs(Tt,{className:"bg-emerald-600/15 border border-emerald-500/40 text-emerald-200 text-[11px] inline-flex items-center gap-1 cursor-pointer hover:bg-emerald-600/25",onClick:y,children:[t.jsx(_,{className:"h-3 w-3"}),zs[i.status]]}),"analise"===i.status&&t.jsxs(Tt,{className:"bg-amber-500/10 border border-amber-400/40 text-amber-200 text-[11px] inline-flex items-center gap-1 cursor-pointer hover:bg-amber-500/20",onClick:y,children:[t.jsx(L,{className:"h-3 w-3"}),zs[i.status]]}),"banido"===i.status&&t.jsxs(Tt,{className:"bg-red-600/10 border border-red-500/40 text-red-200 text-[11px] inline-flex items-center gap-1 cursor-pointer hover:bg-red-600/20",onClick:y,children:[t.jsx(R,{className:"h-3 w-3"}),zs[i.status]]})]}),t.jsx("div",{className:"md:col-span-1 md:text-right text-xs text-neutral-400",children:e.lastAccess}),u&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-neutral-900 border border-neutral-700 rounded-lg p-4 max-w-sm w-full",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx(z,{className:"h-5 w-5 text-amber-400"}),t.jsx("h3",{className:"text-white font-semibold",children:"Confirmar mudança de perfil"})]}),t.jsx("p",{className:"text-neutral-300 text-sm mb-4",children:"Tem certeza que deseja promover este usuário para Administrador? Esta ação concederá acesso completo ao painel administrativo."}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx(H,{onClick:()=>m(!1),className:"bg-neutral-700 hover:bg-neutral-600",children:"Cancelar"}),t.jsx(H,{onClick:E,className:"bg-green-600 hover:bg-green-500",disabled:p,children:p?"Salvando...":"Confirmar"})]})]})}),h&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-neutral-900 border border-neutral-700 rounded-lg p-4 max-w-sm w-full",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx(k,{className:"h-5 w-5 text-red-400"}),t.jsx("h3",{className:"text-white font-semibold",children:"Confirmar exclusão"})]}),t.jsxs("p",{className:"text-neutral-300 text-sm mb-2",children:["Tem certeza que deseja excluir o usuário"," ",t.jsx("span",{className:"text-white font-semibold",children:e.name}),"?"]}),t.jsxs("p",{className:"text-neutral-400 text-xs mb-4",children:["ID: ",e.id," • ",e.email]}),t.jsx("p",{className:"text-red-400 text-sm mb-4",children:"⚠️ Esta ação não pode ser desfeita. Todos os dados do usuário serão permanentemente removidos."}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx(H,{onClick:()=>x(!1),className:"bg-neutral-700 hover:bg-neutral-600",disabled:p,children:"Cancelar"}),t.jsx(H,{onClick:j,className:"bg-red-600 hover:bg-red-500",disabled:p,children:p?"Excluindo...":"Excluir"})]})]})})]})]})}function $s({isOpen:e,onOpenChange:s,title:a,description:r,confirmText:n="Excluir",cancelText:l="Cancelar",onConfirm:o,variant:i="destructive"}){const[u,m]=c.useState(!1);return t.jsx(X,{open:e,onOpenChange:s,children:t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white max-w-md",children:[t.jsx(Q,{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-full "+("destructive"===i?"bg-red-600/20 text-red-400":"bg-blue-600/20 text-blue-400"),children:t.jsx(z,{className:"h-5 w-5"})}),t.jsx(Z,{className:"text-lg font-semibold",children:a})]})}),t.jsx(ee,{className:"text-neutral-300",children:r}),t.jsxs(de,{className:"gap-2",children:[t.jsx(H,{onClick:()=>s(!1),disabled:u,className:"border border-neutral-700 text-white hover:bg-neutral-800",children:l}),t.jsx(H,{variant:i,onClick:async()=>{m(!0);try{await o(),s(!1)}finally{m(!1)}},disabled:u,className:"destructive"===i?"bg-red-600 hover:bg-red-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white",children:u?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"h-4 w-4 animate-spin"}),"Excluindo..."]}):n})]})]})})}function Bs({isOpen:e,onOpenChange:s,categoryName:a,onCategoryNameChange:r,categoryDescription:n,onCategoryDescriptionChange:l,onUpdateCategory:o,isLoading:i=!1}){return t.jsx(X,{open:e,onOpenChange:s,children:t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white",children:[t.jsxs(Q,{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-full bg-blue-600/20 text-blue-400",children:t.jsx(S,{className:"h-5 w-5"})}),t.jsx(Z,{children:"Editar Categoria"})]}),t.jsx(ee,{className:"text-neutral-400",children:"Altere o nome da categoria. Esta ação será aplicada imediatamente."})]}),t.jsxs("div",{className:"py-4 space-y-4",children:[t.jsx(ot,{value:a,onChange:e=>r(e.target.value),className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"Nome da categoria",onKeyDown:e=>{"Enter"===e.key&&a.trim()&&o()},disabled:i}),t.jsx("textarea",{value:n,onChange:e=>l(e.target.value),className:"w-full bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500 rounded-md px-3 py-2 text-sm resize-none h-20 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Descrição da categoria",rows:3,disabled:i,required:!0})]}),t.jsxs(de,{children:[t.jsx(H,{onClick:()=>s(!1),disabled:i,className:"border border-neutral-700 text-white hover:bg-neutral-800",children:"Cancelar"}),t.jsx(H,{onClick:o,disabled:!a.trim()||!n.trim()||i,className:"bg-blue-600 hover:bg-blue-700",children:i?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar Alterações"})]})]})})}function Hs({isOpen:e,onOpenChange:s,courseTitle:a,onCourseTitleChange:r,courseDescription:n,onCourseDescriptionChange:l,onUpdateCourse:o,categoryName:i,isLoading:c=!1}){return t.jsx(X,{open:e,onOpenChange:s,children:t.jsxs(K,{className:"bg-neutral-950 border-neutral-800 text-white",children:[t.jsxs(Q,{children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-full bg-blue-600/20 text-blue-400",children:t.jsx(S,{className:"h-5 w-5"})}),t.jsx(Z,{children:"Editar Curso"})]}),t.jsx(ee,{className:"text-neutral-400",children:i?`Alterando o título do curso na categoria: ${i}`:"Alterando o título do curso."})]}),t.jsxs("div",{className:"py-4 space-y-4",children:[t.jsx(ot,{value:a,onChange:e=>r(e.target.value),className:"bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500",placeholder:"Título do curso",onKeyDown:e=>{"Enter"===e.key&&a.trim()&&o()},disabled:c}),t.jsx("textarea",{value:n,onChange:e=>l(e.target.value),className:"w-full bg-neutral-900 border-neutral-700 text-white placeholder:text-neutral-500 rounded-md px-3 py-2 text-sm resize-none h-20 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Descrição do curso",rows:3,disabled:c,required:!0})]}),t.jsxs(de,{children:[t.jsx(H,{onClick:()=>s(!1),disabled:c,className:"border border-neutral-700 text-white hover:bg-neutral-800",children:"Cancelar"}),t.jsx(H,{onClick:o,disabled:!a.trim()||!n.trim()||c,className:"bg-blue-600 hover:bg-blue-700",children:c?t.jsxs(t.Fragment,{children:[t.jsx(d,{className:"h-4 w-4 animate-spin"}),"Salvando..."]}):"Salvar Alterações"})]})]})})}function Ws(){const[e,s]=c.useState("courses"),[a,r]=c.useState(new Set),[n,l]=c.useState(new Set),[o,i]=c.useState({type:"category",categoryId:null,courseId:null,lessonId:null}),[u,m]=c.useState(""),[h,x]=c.useState(!1),[p,g]=c.useState(""),[f,b]=c.useState(""),[v,j]=c.useState(!1),[w,N]=c.useState(""),[y,C]=c.useState(""),[S,E]=c.useState(!1),[k,T]=c.useState(""),[P,D]=c.useState(""),[O,R]=c.useState(""),[L,I]=c.useState(null),[A,_]=c.useState(!1),[z,M]=c.useState([]),[F,U]=c.useState(!0),[q,$]=c.useState(null),[B,H]=c.useState({}),[W,V]=c.useState({}),[J,G]=c.useState({}),[X,Y]=c.useState({}),[K,Q]=c.useState(null),[Z,ee]=c.useState(!1),[te,se]=c.useState(""),[ae,re]=c.useState(""),[ce,de]=c.useState(null),[ue,me]=c.useState(!1),[he,xe]=c.useState(""),[pe,ge]=c.useState(""),[fe,be]=c.useState(!1),[ve,je]=c.useState(!1),[we,Ne]=c.useState(!1),[ye,Ce]=c.useState(!1),[Se,Ee]=c.useState(!1),[ke,Te]=c.useState(!1),{showConfirmDialog:Pe,ConfirmDialogComponent:De}=function(){const[e,s]=c.useState({isOpen:!1,title:"",description:"",onConfirm:null,confirmText:"Excluir",cancelText:"Cancelar",variant:"destructive"}),a=()=>{s(e=>({...e,isOpen:!1}))};return{showConfirmDialog:e=>{s({isOpen:!0,title:e.title||"Confirmar exclusão",description:e.description||"Tem certeza que deseja continuar?",onConfirm:e.onConfirm||(()=>{}),confirmText:e.confirmText||"Excluir",cancelText:e.cancelText||"Cancelar",variant:e.variant||"destructive"})},hideDialog:a,ConfirmDialogComponent:()=>t.jsx($s,{isOpen:e.isOpen,onOpenChange:a,title:e.title,description:e.description,confirmText:e.confirmText,cancelText:e.cancelText,onConfirm:e.onConfirm,variant:e.variant})}}();c.useEffect(()=>{(async()=>{try{U(!0);const e=await Gt();M(e?.Result?.categories||[]),$(null)}catch(e){$(e.message),M([])}finally{U(!1)}})()},[]);const Oe=async e=>{const t=new Set(a);if(!t.has(e)){if(t.add(e),r(t),!W[e])try{H(t=>({...t,[e]:!0}));const t=await rs(e),s=t?.Result?.courses||[];V(t=>({...t,[e]:s}))}catch(s){}finally{H(t=>({...t,[e]:!1}))}}else t.delete(e),r(t)},Re=async e=>{const t=new Set(n);if(!t.has(e)){if(t.add(e),l(t),!X[e])try{G(t=>({...t,[e]:!0}));const t=await ns(e),s=t?.Result?.lessons||[];Y(t=>({...t,[e]:s}))}catch(s){}finally{G(t=>({...t,[e]:!1}))}}else t.delete(e),l(t)},Le=c.useMemo(()=>{const e=u.trim().toLowerCase();return e?z.map(t=>{const s=(W[t.id]||[]).map(e=>({...e,lessons:X[e.id]||[]})),a=t.name.toLowerCase().includes(e),r=s.map(t=>{const s=t.title.toLowerCase().includes(e),a=t.lessons.filter(t=>t.title.toLowerCase().includes(e));return s?t:a.length>0?{...t,lessons:a}:null}).filter(Boolean);return a?{...t,courses:s}:r.length>0?{...t,courses:r}:null}).filter(Boolean):z.map(e=>({...e,courses:(W[e.id]||[]).map(e=>({...e,lessons:X[e.id]||[]}))}))},[u,z,W,X]),Ie=c.useMemo(()=>{if("category"===o.type){return{category:z.find(e=>e.id===o.categoryId)||null,course:null,lesson:null}}if("course"===o.type){return{category:z.find(e=>e.id===o.categoryId)||null,course:(W[o.categoryId]||[]).map(e=>({...e,lessons:X[e.id]||[]})).find(e=>e.id===o.courseId)||null,lesson:null}}if("lesson"===o.type){const e=z.find(e=>e.id===o.categoryId)||null,t=(W[o.categoryId]||[]).map(e=>({...e,lessons:X[e.id]||[]})).find(e=>e.id===o.courseId)||null,s=t?.lessons?.find(e=>e.id===o.lessonId)||null;return{category:e,course:t,lesson:s}}return{category:null,course:null,lesson:null}},[o,z,W,X]),Ae=e=>{I(e),_(!0)},_e=e=>{Q(e),se(e.name||""),re(e.description||""),ee(!0)},ze=(e,t)=>{z.find(t=>t.id===e),de({...t,categoryId:e}),xe(t.title||""),ge(t.description||""),me(!0)},Me=e=>{const t=z.find(t=>t.id===e);Pe({title:"Excluir Categoria",description:`Tem certeza que deseja excluir a categoria "${t?.name}" e todo o seu conteúdo? Esta ação não pode ser desfeita.`,confirmText:"Excluir Categoria",onConfirm:async()=>{try{await Kt(e);const t=await Gt();M(t?.Result?.categories||[]),"category"===o.type&&o.categoryId===e&&i({type:"category",categoryId:null,courseId:null,lessonId:null})}catch(t){}}})},Fe=(e,t)=>{z.find(t=>t.id===e);const s=W[e]?.find(e=>e.id===t);Pe({title:"Excluir Curso",description:`Tem certeza que deseja excluir o curso "${s?.title}" e todas as suas aulas? Esta ação não pode ser desfeita.`,confirmText:"Excluir Curso",onConfirm:async()=>{try{await es(t);const s=await rs(e),a=s?.Result?.courses||[];V(t=>({...t,[e]:a})),"course"===o.type&&o.courseId===t&&i({type:"category",categoryId:null,courseId:null,lessonId:null})}catch(s){}}})},Ue=(e,t,s)=>{z.find(t=>t.id===e),W[e]?.find(e=>e.id===t);const a=X[t]?.find(e=>e.id===s);Pe({title:"Excluir Aula",description:`Tem certeza que deseja excluir a aula "${a?.title}"? Esta ação não pode ser desfeita.`,confirmText:"Excluir Aula",onConfirm:async()=>{try{await as(s);const a=await ns(t),r=a?.Result?.lessons||[];Y(e=>({...e,[t]:r})),"lesson"===o.type&&o.lessonId===s&&i({type:"course",categoryId:e,courseId:t,lessonId:null})}catch(a){}}})},qe={isOpen:h,onOpenChange:x,categoryName:p,onCategoryNameChange:g,categoryDescription:f,onCategoryDescriptionChange:b,onCreateCategory:async()=>{if(p.trim()&&f.trim())try{be(!0),await Xt(p.trim(),f.trim());const e=await Gt();M(e?.Result?.categories||[]),g(""),b(""),x(!1)}catch(e){}finally{be(!1)}},isLoading:fe},$e={isOpen:v,onOpenChange:j,courseTitle:w,onCourseTitleChange:N,courseDescription:y,onCourseDescriptionChange:C,onCreateCourse:async()=>{if(w.trim()&&y.trim()&&o.categoryId)try{je(!0),await Qt(o.categoryId,w.trim(),y.trim());const e=await rs(o.categoryId),t=e?.Result?.courses||[];V(e=>({...e,[o.categoryId]:t})),N(""),C(""),j(!1),r(new Set([...a,o.categoryId]))}catch(e){}finally{je(!1)}},selectedCategoryId:o.categoryId,categories:z,isLoading:ve},Be={isOpen:S,onOpenChange:E,lessonTitle:k,onLessonTitleChange:T,lessonDuration:P,onLessonDurationChange:D,lessonDescription:O,onLessonDescriptionChange:R,onCreateLesson:async()=>{if(k.trim()&&P.trim()&&O.trim()&&o.categoryId&&o.courseId)try{Ne(!0),await ts(o.courseId,k.trim(),P.trim(),O.trim());const e=await ns(o.courseId),t=e?.Result?.lessons||[];Y(e=>({...e,[o.courseId]:t})),T(""),D(""),R(""),E(!1),r(new Set([...a,o.categoryId])),l(new Set([...n,o.courseId]))}catch(e){}finally{Ne(!1)}},selectedCategoryId:o.categoryId,selectedCourseId:o.courseId,categories:z,isLoading:we};return t.jsxs("div",{className:"w-full space-y-4",children:[t.jsxs("div",{className:"inline-flex items-center gap-1 rounded-xl bg-neutral-950 border border-neutral-800 p-1 w-full sm:w-auto",children:[t.jsx(Vs,{label:"Conteúdo",description:"Categorias, cursos e aulas",isActive:"courses"===e,onClick:()=>s("courses")}),t.jsx(Vs,{label:"Usuários",description:"Alunos e administradores",isActive:"users"===e,onClick:()=>s("users")})]}),"courses"===e&&t.jsxs(t.Fragment,{children:[t.jsx(As,{query:u,onQueryChange:m,categoryDialogProps:qe,courseDialogProps:$e,lessonDialogProps:Be}),t.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-4",children:[t.jsxs(ne,{className:"xl:col-span-2 lg:col-span-1 bg-neutral-950 border-neutral-800 text-white shadow-2xl",children:[t.jsxs(oe,{className:"pb-4",children:[t.jsx(ie,{className:"text-lg font-semibold",children:"Estrutura"}),t.jsx("p",{className:"text-sm text-neutral-400",children:"Categoria → Curso → Aula"})]}),t.jsxs(le,{className:"space-y-3",children:[F&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-400 py-4",children:[t.jsx(d,{className:"h-4 w-4 animate-spin shrink-0"}),"Carregando categorias..."]}),q&&t.jsxs("div",{className:"text-sm text-red-400",children:["Erro: ",q]}),!F&&!q&&0===Le.length&&t.jsx("div",{className:"text-sm text-neutral-400",children:"Nenhuma categoria encontrada."}),!F&&!q&&Le.map(e=>t.jsx(Os,{category:e,isExpanded:a.has(e.id),onToggle:Oe,onSelect:i,isSelected:"category"===o.type&&o.categoryId===e.id,expandedCourses:n,onCourseToggle:Re,onCourseSelect:i,onLessonSelect:i,selected:o,onEditLesson:Ae,onDeleteCategory:Me,onDeleteCourse:Fe,onDeleteLesson:Ue,onEditCategory:_e,onEditCourse:ze,loadingCourses:B,loadingLessons:J},e.id))]})]}),t.jsx(ne,{className:"hidden xl:block xl:col-span-3 bg-neutral-950 border-neutral-800 text-white shadow-2xl",children:t.jsx(le,{className:"pt-4",children:t.jsx(Is,{selectedData:Ie,selected:o,onEditLesson:Ae,onDeleteCategory:Me,onDeleteCourse:Fe,onDeleteLesson:Ue,onEditCategory:_e,onEditCourse:ze,lessonDialogProps:Be})})})]})]}),"users"===e&&t.jsx(Fs,{}),t.jsx(Ts,{isOpen:A,onOpenChange:e=>{_(e),e||I(null)},lesson:L,onSaveLesson:async e=>{try{Te(!0),await ss(e.id,e.title,e.duration,e.description,e.isPaid);const t=await ns(o.courseId),s=t?.Result?.lessons||[];Y(e=>({...e,[o.courseId]:s})),I(null)}catch(t){}finally{Te(!1)}},categories:z,isLoading:ke}),t.jsx(Bs,{isOpen:Z,onOpenChange:ee,categoryName:te,onCategoryNameChange:se,categoryDescription:ae,onCategoryDescriptionChange:re,onUpdateCategory:async()=>{if(K&&te.trim()&&ae.trim())try{Ce(!0),await Yt(K.id,te.trim(),ae.trim());const e=await Gt();M(e?.Result?.categories||[]),ee(!1),Q(null),se(""),re("")}catch(e){}finally{Ce(!1)}},isLoading:ye}),t.jsx(Hs,{isOpen:ue,onOpenChange:me,courseTitle:he,onCourseTitleChange:xe,courseDescription:pe,onCourseDescriptionChange:ge,onUpdateCourse:async()=>{if(ce&&he.trim()&&pe.trim())try{Ee(!0),await Zt(ce.id,he.trim(),pe.trim());const e=await rs(ce.categoryId),t=e?.Result?.courses||[];V(e=>({...e,[ce.categoryId]:t})),me(!1),de(null),xe(""),ge("")}catch(e){}finally{Ee(!1)}},categoryName:ce?z.find(e=>e.id===ce.categoryId)?.name:"",isLoading:Se}),t.jsx(De,{})]})}function Vs({label:e,description:s,isActive:a,onClick:r}){return t.jsxs("button",{type:"button",onClick:r,className:"flex-1 sm:flex-none px-3 sm:px-4 py-2 rounded-lg text-left transition-colors "+(a?"bg-green-600/15 border border-green-500/40 shadow-[0_0_0_1px_rgba(22,163,74,0.4)]":"border border-transparent hover:border-neutral-700 hover:bg-neutral-900/70"),children:[t.jsx("div",{className:"text-xs font-semibold tracking-wide uppercase text-neutral-400",children:e}),t.jsx("div",{className:"text-[11px] text-neutral-500",children:s})]})}function Js({open:e,onOpenChange:s}){return t.jsx(X,{open:e,onOpenChange:s,children:t.jsxs(K,{"data-dashboard-dialog":!0,className:"bg-neutral-950 border-neutral-800 text-white !w-[85vw] !h-[85vh] !max-w-none !max-h-none !m-0 !rounded-lg !p-0 !top-[50%] !left-[50%] !translate-x-[-50%] !translate-y-[-50%] !flex !flex-col !gap-0 !overflow-hidden",children:[t.jsxs(Q,{className:"px-4 sm:px-6 py-4 border-b border-neutral-800 shrink-0",children:[t.jsx(Z,{className:"text-xl sm:text-2xl font-bold text-white",children:"Dashboard Administrativo"}),t.jsx(ee,{className:"text-neutral-400",children:"Gerencie categorias, cursos, aulas e usuários da plataforma"})]}),t.jsx("div",{"data-dashboard-scroll":!0,className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden scrollbar-hide px-4 sm:px-6 py-4",children:t.jsx(Ws,{})})]})})}function Gs({isOpen:e,setIsOpen:s}){const a=J(),[r,n]=c.useState("home"),[l,o]=c.useState(!1),[i,d]=c.useState(""),[m,h]=c.useState(!1),[x,p]=c.useState(!1);c.useEffect(()=>{const e=()=>{const e=he();if(o(e),e){const e=xe(),t=pe();d(e||""),h(t)}else d(""),h(!1)};e();const t=setInterval(e,3e4),s=()=>{e()};return window.addEventListener("login-success",s),()=>{clearInterval(t),window.removeEventListener("login-success",s)}},[]);const g=!a||e;return t.jsxs(t.Fragment,{children:[a&&e&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>s(!1)}),t.jsx("aside",{className:`\n          fixed lg:relative z-50\n          flex h-dvh w-80 flex-col bg-neutral-950 text-white\n          transition-transform duration-300 ease-in-out\n          ${g?"translate-x-0":"-translate-x-full"}\n        `,children:t.jsxs("div",{className:"relative m-4 flex h-[calc(100%-2rem)] flex-col overflow-hidden rounded-r-2xl rounded-l-none border border-neutral-800 bg-neutral-950 shadow-2xl shadow-black/70",children:[!a&&t.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 w-px bg-linear-to-b from-green-500/70 to-emerald-400/40"}),t.jsxs("div",{className:"flex items-center justify-between px-5 pt-5",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:me,alt:"Ring0X Logo",className:"h-11 w-11 rounded-lg object-cover"}),t.jsx("span",{className:"text-xl font-semibold tracking-wide text-green-400",children:"RING0X"})]}),a&&t.jsx(H,{variant:"ghost",size:"icon",onClick:()=>s(!1),className:"text-neutral-400 hover:bg-neutral-800 hover:text-white",children:t.jsx(w,{className:"h-5 w-5"})})]}),t.jsx("div",{className:"px-5 pt-4",children:t.jsx(lt,{className:"bg-white/10"})}),t.jsx(Ze,{className:"flex-1 min-h-0 px-3 py-3 flex flex-col",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs(H,{variant:"ghost",className:"group relative h-14 w-full justify-start gap-3 rounded-lg px-4 text-base text-white hover:bg-neutral-800 "+("home"===r?"bg-neutral-800":""),onClick:()=>{n("home");const e=document.querySelector("main");e&&e.scrollTo({top:0,behavior:"smooth"}),a&&s(!1)},children:[t.jsx("span",{className:"absolute left-0 top-1/2 h-10 w-1 -translate-y-1/2 rounded-r-full "+("home"===r?"bg-green-500":"bg-transparent")}),t.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-lg "+("home"===r?"bg-green-500/20 text-green-400":"bg-neutral-800 text-neutral-400 group-hover:text-white"),children:t.jsx(M,{className:"h-5 w-5"})}),t.jsx("span",{className:"font-medium",children:"Home"})]}),t.jsx("div",{className:"px-4",children:t.jsx(lt,{className:"bg-white/10"})}),l&&t.jsx(Vt,{children:t.jsxs(H,{variant:"ghost",className:"group relative h-14 w-full justify-start gap-3 rounded-lg px-4 text-base text-white hover:bg-neutral-800 "+("meus-cursos"===r?"bg-neutral-800":""),onClick:()=>n("meus-cursos"),children:[t.jsx("span",{className:"absolute left-0 top-1/2 h-10 w-1 -translate-y-1/2 rounded-r-full "+("meus-cursos"===r?"bg-green-500":"bg-transparent")}),t.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-lg "+("meus-cursos"===r?"bg-green-500/20 text-green-400":"bg-neutral-800 text-neutral-400 group-hover:text-white"),children:t.jsx(F,{className:"h-5 w-5"})}),t.jsx("span",{className:"font-medium",children:"Meus Cursos"})]})}),l&&t.jsx("div",{className:"px-4",children:t.jsx(lt,{className:"bg-white/10"})}),m&&t.jsxs(t.Fragment,{children:[t.jsxs(H,{variant:"ghost",className:"group relative h-14 w-full justify-start gap-3 rounded-lg px-4 text-base text-white hover:bg-neutral-800 "+("dashboard"===r?"bg-neutral-800":""),onClick:()=>{n("dashboard"),p(!0)},children:[t.jsx("span",{className:"absolute left-0 top-1/2 h-10 w-1 -translate-y-1/2 rounded-r-full "+("dashboard"===r?"bg-green-500":"bg-transparent")}),t.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-lg "+("dashboard"===r?"bg-green-500/20 text-green-400":"bg-neutral-800 text-neutral-400 group-hover:text-white"),children:t.jsx(U,{className:"h-5 w-5"})}),t.jsx("span",{className:"font-medium",children:"Dashboard"})]}),t.jsx(Js,{open:x,onOpenChange:p})]}),m&&t.jsx("div",{className:"px-4",children:t.jsx(lt,{className:"bg-white/10"})}),t.jsxs(H,{variant:"ghost",className:"group relative h-14 w-full justify-start gap-3 rounded-lg px-4 text-base font-medium text-white hover:bg-neutral-800 "+("cursos"===r?"bg-neutral-800":""),onClick:()=>{n("cursos"),setTimeout(()=>{let e=document.querySelector("[data-cursos-card]");e||(e=Array.from(document.querySelectorAll("h1, h2, h3")).find(e=>e.textContent.includes("Cursos"))?.closest('.card, [class*="Card"]')),e||(e=Array.from(document.querySelectorAll("*")).find(e=>e.textContent.includes("Cursos")&&e.classList.contains("bg-neutral-950"))),e&&e.scrollIntoView({behavior:"smooth",block:"start"}),a&&s(!1)},a?300:0)},children:[t.jsx("span",{className:"absolute left-0 top-1/2 h-10 w-1 -translate-y-1/2 rounded-r-full "+("cursos"===r?"bg-green-500":"bg-transparent")}),t.jsx("span",{className:"flex h-10 w-10 items-center justify-center rounded-lg "+("cursos"===r?"bg-green-500/20 text-green-400":"bg-neutral-800 text-neutral-400 group-hover:text-white"),children:t.jsx(u,{className:"h-5 w-5"})}),t.jsx("span",{className:"font-medium",children:"Cursos"})]})]})}),t.jsx("div",{className:"px-5 pb-4",children:t.jsx(lt,{className:"bg-white/10"})}),t.jsx("div",{className:"flex flex-col gap-3 px-5 pb-5 shrink-0",children:l?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-neutral-800/50 rounded-lg",children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-green-600/20",children:t.jsx(I,{className:"h-4 w-4 text-green-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-sm font-medium text-white truncate",children:i}),t.jsx("div",{className:"text-xs text-neutral-400",children:"Logado"})]})]}),t.jsxs(H,{onClick:()=>{ge(),o(!1),d(""),h(!1),n("home")},className:"w-full bg-red-600/20 border border-red-600/30 text-red-400 hover:bg-red-600/30 hover:text-red-300",children:[t.jsx(q,{className:"h-4 w-4 mr-2"}),"Sair"]})]}):t.jsxs(t.Fragment,{children:[t.jsx(ct,{}),t.jsx(dt,{}),t.jsx("div",{className:"hidden",children:t.jsx(Et,{})})]})})]})})]})}export{Gs as default};
